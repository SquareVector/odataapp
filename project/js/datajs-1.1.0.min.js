(function(eP,gG){var f5=eP.datajs||{};var gb=eP.OData||{};if(typeof define==="function"&&define.amd){define("datajs",f5);define("OData",gb)}else{eP.datajs=f5;eP.OData=gb}var dj=function(hb){if(eP.ActiveXObject){return new eP.ActiveXObject(hb)}return null};var b8=function(hb){return hb!==null&&hb!==gG};var gU=function(hc,he){var hd,hb;for(hd=0,hb=hc.length;hd<hb;hd++){if(hc[hd]===he){return true}}return false};var cC=function(hc,hb){return(hc!==gG)?hc:hb};var fi=function(hc){if(arguments.length===1){eP.setTimeout(hc,0);return}var hb=Array.prototype.slice.call(arguments,1);eP.setTimeout(function(){hc.apply(this,hb)},0)};var g6=function(hd,hb){for(var hc in hb){hd[hc]=hb[hc]}return hd};var O=function(hc,he){if(hc){var hd,hb;for(hd=0,hb=hc.length;hd<hb;hd++){if(he(hc[hd])){return hc[hd]}}}return null};var ac=function(hb){return Object.prototype.toString.call(hb)==="[object Array]"};var gf=function(hb){return Object.prototype.toString.call(hb)==="[object Date]"};var C=function(hb){return typeof hb==="object"};var cR=function(hb){return parseInt(hb,10)};var d1=function(hd,hc,hb){if(hd.hasOwnProperty(hc)){hd[hb]=hd[hc];delete hd[hc]}};var bJ=function(hb){throw hb};var fM=function(hb){if(hb.trim){return hb.trim()}return hb.replace(/^\s+|\s+$/g,"")};var cy=function(hc,hb){return(hc!==gG)?hc:hb};var dt=/^([^:\/?#]+:)?(\/\/[^\/?#]*)?([^?#:]+)?(\?[^#]*)?(#.*)?/;var cc=["scheme","authority","path","query","fragment"];var cw=function(he){var hc={isAbsolute:false};if(he){var hf=dt.exec(he);if(hf){var hd,hb;for(hd=0,hb=cc.length;hd<hb;hd++){if(hf[hd+1]){hc[cc[hd]]=hf[hd+1]}}}if(hc.scheme){hc.isAbsolute=true}}return hc};var k=function(hb){return"".concat(hb.scheme||"",hb.authority||"",hb.path||"",hb.query||"",hb.fragment||"")};var cb=/^\/{0,2}(?:([^@]*)@)?([^:]+)(?::{1}(\d+))?/;var fG=/%[0-9A-F]{2}/ig;var fu=function(hd){var hc=cw(hd);var hb=hc.scheme;var hf=hc.authority;if(hb){hc.scheme=hb.toLowerCase();if(hf){var he=cb.exec(hf);if(he){hc.authority="//"+(he[1]?he[1]+"@":"")+(he[2].toLowerCase())+(he[3]?":"+he[3]:"")}}}hd=k(hc);return hd.replace(fG,function(hg){return hg.toLowerCase()})};var bv=function(hd,he){if(!he){return hd}var hc=cw(hd);if(hc.isAbsolute){return hd}var hg=cw(he);var hb={};var hf;if(hc.authority){hb.authority=hc.authority;hf=hc.path;hb.query=hc.query}else{if(!hc.path){hf=hg.path;hb.query=hc.query||hg.query}else{if(hc.path.charAt(0)==="/"){hf=hc.path}else{hf=dn(hc.path,hg.path)}hb.query=hc.query}hb.authority=hg.authority}hb.path=fc(hf);hb.scheme=hg.scheme;hb.fragment=hc.fragment;return k(hb)};var dn=function(hc,he){var hd="/";var hb;if(he){hb=he.lastIndexOf("/");hd=he.substring(0,hb);if(hd.charAt(hd.length-1)!=="/"){hd=hd+"/"}}return hd+hc};var fc=function(he){var hb="";var hd="";var hc;while(he){if(he.indexOf("..")===0||he.indexOf(".")===0){he=he.replace(/^\.\.?\/?/g,"")}else{if(he.indexOf("/..")===0){he=he.replace(/^\/\..\/?/g,"/");hc=hb.lastIndexOf("/");if(hc===-1){hb=""}else{hb=hb.substring(0,hc)}}else{if(he.indexOf("/.")===0){he=he.replace(/^\/\.\/?/g,"/")}else{hd=he;hc=he.indexOf("/",1);if(hc!==-1){hd=he.substring(0,hc)}hb=hb+hd;he=he.replace(hd,"")}}}}return hb};var cg="http://";var H=cg+"www.w3.org/";var e7=H+"1999/xhtml";var gJ=H+"2000/xmlns/";var cY=H+"XML/1998/namespace";var dl=cg+"www.mozilla.org/newlayout/xml/parsererror.xml";var ck=function(hc){var hb=/(^\s)|(\s$)/;return hb.test(hc)};var cG=function(hc){var hb=/^\s*$/;return hc===null||hb.test(hc)};var cH=function(hc){while(hc!==null&&hc.nodeType===1){var hb=eF(hc,"space",cY);if(hb==="preserve"){return true}else{if(hb==="default"){break}else{hc=hc.parentNode}}}return false};var dr=function(hb){var hc=hb.nodeName;return hc=="xmlns"||hc.indexOf("xmlns:")==0};var el=function(he,hc,hd){try{he.setProperty(hc,hd)}catch(hb){}};var aL=function(){var hb=dj("Msxml2.DOMDocument.3.0");if(hb){el(hb,"ProhibitDTD",true);el(hb,"MaxElementDepth",256);el(hb,"AllowDocumentFunction",false);el(hb,"AllowXsltScript",false)}return hb};var ew=function(){try{var hc=dj("Msxml2.DOMDocument.6.0");if(hc){hc.async=true}return hc}catch(hb){return aL()}};var co=function(hd){var hc=ew();if(!hc){return null}hc.loadXML(hd);var hb=hc.parseError;if(hb.errorCode!==0){bR(hb.reason,hb.srcText,hd)}return hc};var bR=function(hd,hb,hc){if(typeof hd==="string"){hd={message:hd}}throw g6(hd,{srcText:hb||"",errorXmlText:hc||""})};var aF=function(hm){var hk=eP.DOMParser&&new eP.DOMParser();var he;if(!hk){he=co(hm);if(!he){bR("XML DOM parser not supported")}return he}try{he=hk.parseFromString(hm,"text/xml")}catch(hi){bR(hi,"",hm)}var hf=he.documentElement;var hc=hf.namespaceURI;var hd=cv(hf);if(hd==="parsererror"&&hc===dl){var hh=ex(hf,dl,"sourcetext");var hb=hh?b(hh):"";bR(d(hf)||"",hb,hm)}if(hd==="h3"&&hc===e7||c9(hf,e7,"h3")){var hg="";var hj=[];var hl=hf.firstChild;while(hl){if(hl.nodeType===1){hg+=d(hl)||""}hj.push(hl.nextSibling);hl=hl.firstChild||hj.shift()}hg+=d(hf)||"";bR(hg,"",hm)}return he};var bi=function(hc,hb){return hc?hc+":"+hb:hb};var bB=function(hc,hd){if(ck(hd.data)){var hb=ee(hc,cY,"space");if(!hb){hb=bp(hc.ownerDocument,cY,bi("xml","space"));aZ(hc,hb)}hb.value="preserve"}hc.appendChild(hd);return hc};var fa=function(hf,hc){var hd=hf.attributes;var he,hb;for(he=0,hb=hd.length;he<hb;he++){hc(hd.item(he))}};var eF=function(hc,hb,he){var hd=ee(hc,hb,he);return hd?b(hd):null};var ee=function(hd,hc,he){var hb=hd.attributes;if(hb.getNamedItemNS){return hb.getNamedItemNS(he||null,hc)}return hb.getQualifiedItem(hc,he)||null};var a=function(hb,hd){var hc=ee(hb,"base",cY);return(hc?bv(hc.value,hd):hd)||null};var eu=function(hb,hc){fl(hb,false,function(hd){if(hd.nodeType===1){hc(hd)}return true})};var g9=function(hc,hd,hg){var hf=hg.split("/");var he,hb;for(he=0,hb=hf.length;he<hb;he++){hc=hc&&ex(hc,hd,hf[he])}return hc||null};var eJ=function(hb,he,hh){var hd=hh.lastIndexOf("/");var hf=hh.substring(hd+1);var hc=hh.substring(0,hd);var hg=hc?g9(hb,he,hc):hb;if(hg){if(hf.charAt(0)==="@"){return ee(hg,hf.substring(1),he)}return ex(hg,he,hf)}return null};var ex=function(hd,hc,hb){return ga(hd,hc,hb,false)};var c9=function(he,hd,hc){if(he.getElementsByTagNameNS){var hb=he.getElementsByTagNameNS(hd,hc);return hb.length>0?hb[0]:null}return ga(he,hd,hc,true)};var ga=function(hf,hd,hb,hc){var he=null;fl(hf,hc,function(hi){if(hi.nodeType===1){var hh=!hd||ca(hi)===hd;var hg=!hb||cv(hi)===hb;if(hh&&hg){he=hi}}return he===null});return he};var d=function(hf){var hc=null;var hd=(hf.nodeType===9&&hf.documentElement)?hf.documentElement:hf;var he=hd.ownerDocument.preserveWhiteSpace===false;var hb;fl(hd,false,function(hi){if(hi.nodeType===3||hi.nodeType===4){var hh=b(hi);var hg=he||!cG(hh);if(!hg){if(hb===gG){hb=cH(hd)}hg=hb}if(hg){if(!hc){hc=hh}else{hc+=hh}}}return true});return hc};var cv=function(hb){return hb.localName||hb.baseName};var ca=function(hb){return hb.namespaceURI||null};var b=function(hb){if(hb.nodeType===1){return d(hb)}return hb.nodeValue};var fl=function(hc,hb,he){var hf=[];var hg=hc.firstChild;var hd=true;while(hg&&hd){hd=he(hg);if(hd){if(hb&&hg.firstChild){hf.push(hg.firstChild)}hg=hg.nextSibling||hf.shift()}}};var aD=function(hf,hd,hc){var he=hf.nextSibling;while(he){if(he.nodeType===1){var hg=!hd||ca(he)===hd;var hb=!hc||cv(he)===hc;if(hg&&hb){return he}}he=he.nextSibling}return null};var E=function(){var hb=eP.document.implementation;return(hb&&hb.createDocument)?hb.createDocument(null,null,null):ew()};var fA=function(he,hd){if(!ac(hd)){return aZ(he,hd)}var hc,hb;for(hc=0,hb=hd.length;hc<hb;hc++){hd[hc]&&aZ(he,hd[hc])}return he};var aZ=function(hb,hc){if(hc){if(typeof hc==="string"){return bB(hb,cV(hb.ownerDocument,hc))}if(hc.nodeType===2){hb.setAttributeNodeNS?hb.setAttributeNodeNS(hc):hb.setAttributeNode(hc)}else{hb.appendChild(hc)}}return hb};var bp=function(hf,hb,he,hd){var hc=hf.createAttributeNS&&hf.createAttributeNS(hb,he)||hf.createNode(2,he,hb||gG);hc.value=hd||"";return hc};var g8=function(hf,hd,he,hc){var hb=hf.createElementNS&&hf.createElementNS(hd,he)||hf.createNode(1,he,hd||gG);return fA(hb,hc||[])};var cX=function(hd,hb,hc){return bp(hd,gJ,bi("xmlns",hc),hb)};var fJ=function(hi,hh){var hf="<c>"+hh+"</c>";var hc=aF(hf);var hb=hc.documentElement;var hg=("importNode" in hi)?hi.importNode(hb,true):hb;var hd=hi.createDocumentFragment();var he=hg.firstChild;while(he){hd.appendChild(he);he=he.nextSibling}return hd};var cV=function(hc,hb){return hc.createTextNode(hb)};var bl=function(hf,hl,hd,hi,hn){var hc="";var hg=hn.split("/");var he=ex;var hk=g8;var hm=hl;var hh,hj;for(hh=0,hj=hg.length;hh<hj;hh++){hc=hg[hh];if(hc.charAt(0)==="@"){hc=hc.substring(1);he=ee;hk=bp}var hb=he(hm,hd,hc);if(!hb){hb=hk(hf,hd,bi(hi,hc));aZ(hm,hb)}hm=hb}return hm};var aO=function(hd){var hb=eP.XMLSerializer;if(hb){var hc=new hb();return hc.serializeToString(hd)}if(hd.xml){return hd.xml}throw {message:"XML serialization unsupported"}};var dY=function(hg){var hf=hg.childNodes;var he,hb=hf.length;if(hb===0){return""}var hh=hg.ownerDocument;var hd=hh.createDocumentFragment();var hi=hh.createElement("c");hd.appendChild(hi);for(he=0;he<hb;he++){hi.appendChild(hf[he])}var hc=aO(hd);hc=hc.substr(3,hc.length-7);for(he=0;he<hb;he++){hg.appendChild(hi.childNodes[he])}return hc};var dZ=function(hd){var hb=hd.xml;if(hb!==gG){return hb}if(eP.XMLSerializer){var hc=new eP.XMLSerializer();return hc.serializeToString(hd)}throw {message:"XML serialization unsupported"}};var j=function(hb,hc,hd){return function(){hb[hc].apply(hb,arguments);return hd}};var dk=function(){this._arguments=gG;this._done=gG;this._fail=gG;this._resolved=false;this._rejected=false};dk.prototype={then:function(hc,hb){if(hc){if(!this._done){this._done=[hc]}else{this._done.push(hc)}}if(hb){if(!this._fail){this._fail=[hb]}else{this._fail.push(hb)}}if(this._resolved){this.resolve.apply(this,this._arguments)}else{if(this._rejected){this.reject.apply(this,this._arguments)}}return this},resolve:function(){if(this._done){var hc,hb;for(hc=0,hb=this._done.length;hc<hb;hc++){this._done[hc].apply(null,arguments)}this._done=gG;this._resolved=false;this._arguments=gG}else{this._resolved=true;this._arguments=arguments}},reject:function(){if(this._fail){var hc,hb;for(hc=0,hb=this._fail.length;hc<hb;hc++){this._fail[hc].apply(null,arguments)}this._fail=gG;this._rejected=false;this._arguments=gG}else{this._rejected=true;this._arguments=arguments}},promise:function(){var hb={};hb.then=j(this,"then",hb);return hb}};var bq=function(){if(eP.jQuery&&eP.jQuery.Deferred){return new eP.jQuery.Deferred()}else{return new dk()}};var dU=function(hc,hb){var hd=((hc&&hc.__metadata)||{}).type;return hd||(hb?hb.type:null)};var eR="Edm.";var b2=eR+"Binary";var dR=eR+"Boolean";var bn=eR+"Byte";var cN=eR+"DateTime";var gY=eR+"DateTimeOffset";var fH=eR+"Decimal";var fn=eR+"Double";var ds=eR+"Guid";var cD=eR+"Int16";var b5=eR+"Int32";var aY=eR+"Int64";var ae=eR+"SByte";var eH=eR+"Single";var gM=eR+"String";var cW=eR+"Time";var cI=eR+"Geography";var c1=cI+"Point";var gj=cI+"LineString";var dN=cI+"Polygon";var eV=cI+"Collection";var b6=cI+"MultiPolygon";var bd=cI+"MultiLineString";var eq=cI+"MultiPoint";var gW=eR+"Geometry";var gS=gW+"Point";var gd=gW+"LineString";var d4=gW+"Polygon";var eN=gW+"Collection";var f2=gW+"MultiPolygon";var ev=gW+"MultiLineString";var bT=gW+"MultiPoint";var gR="Point";var aS="LineString";var bu="Polygon";var ep="MultiPoint";var bS="MultiLineString";var aN="MultiPolygon";var e8="GeometryCollection";var bt=[gM,b5,aY,dR,fn,eH,cN,gY,cW,fH,ds,bn,cD,ae,b2];var aw=[gW,gS,gd,d4,eN,f2,ev,bT];var eg=[cI,c1,gj,dN,eV,b6,bd,eq];var b1=function(he,hf){if(!he){return null}if(ac(he)){var hd,hc,hb;for(hd=0,hc=he.length;hd<hc;hd++){hb=b1(he[hd],hf);if(hb){return hb}}return null}else{if(he.dataServices){return b1(he.dataServices.schema,hf)}return hf(he)}};var eI=function(hb,hc){if(hb===0){hb=""}else{hb="."+gC(hb.toString(),3)}if(hc>0){if(hb===""){hb=".000"}hb+=gC(hc.toString(),4)}return hb};var N=function(hk){if(typeof hk==="string"){return hk}var hf=dV(hk);var he=eQ(hk.__offset);if(hf&&he!=="Z"){hk=new Date(hk.valueOf());var hg=gI(he);var hj=hk.getUTCHours()+(hg.d*hg.h);var hd=hk.getMinutes()+(hg.d*hg.m);hk.setUTCHours(hj,hd)}else{if(!hf){he=""}}var hi=hk.getUTCFullYear();var hh=hk.getUTCMonth()+1;var hc="";if(hi<=0){hi=-(hi-1);hc="-"}var hb=eI(hk.getUTCMilliseconds(),hk.__ns);return hc+gC(hi,4)+"-"+gC(hh,2)+"-"+gC(hk.getUTCDate(),2)+"T"+gC(hk.getUTCHours(),2)+":"+gC(hk.getUTCMinutes(),2)+":"+gC(hk.getUTCSeconds(),2)+hb+he};var I=function(hf){var hd=hf.ms;var hc="";if(hd<0){hc="-";hd=-hd}var hh=Math.floor(hd/86400000);hd-=86400000*hh;var hb=Math.floor(hd/3600000);hd-=3600000*hb;var he=Math.floor(hd/60000);hd-=60000*he;var hg=Math.floor(hd/1000);hd-=hg*1000;return hc+"P"+gC(hh,2)+"DT"+gC(hb,2)+"H"+gC(he,2)+"M"+gC(hg,2)+eI(hd,hf.ns)+"S"};var gC=function(he,hd,hc){var hb=he.toString(10);while(hb.length<hd){if(hc){hb+="0"}else{hb="0"+hb}}return hb};var eQ=function(hb){return(!hb||hb==="Z"||hb==="+00:00"||hb==="-00:00")?"Z":hb};var dA=function(hc){if(typeof hc==="string"){var hb=hc.indexOf(")",10);if(hc.indexOf("Collection(")===0&&hb>0){return hc.substring(11,hb)}}return null};var g=function(hf,hg,hc,he,hb,hd){return hb.request(hf,function(hh){try{if(hh.headers){cL(hh.headers)}if(hh.data===gG&&hh.statusCode!==204){he.read(hh,hd)}}catch(hi){if(hi.request===gG){hi.request=hf}if(hi.response===gG){hi.response=hh}hc(hi);return}hg(hh.data,hh)},hc)};var fx=function(hb){return gE(hb)&&ac(hb.__batchRequests)};var dW=/Collection\((.*)\)/;var by=function(hc,hb){var hd=hc&&hc.results||hc;return !!hd&&(V(hb))||(!hb&&ac(hd)&&!gE(hd[0]))};var V=function(hb){return dW.test(hb)};var gE=function(hb){return !!hb&&C(hb)&&!ac(hb)&&!gf(hb)};var dV=function(hb){return(hb.__edmType==="Edm.DateTimeOffset"||(!hb.__edmType&&hb.__offset))};var ft=function(hd){if(!hd&&!gE(hd)){return false}var hc=hd.__metadata||{};var hb=hd.__deferred||{};return !hc.type&&!!hb.uri};var e=function(hb){return gE(hb)&&hb.__metadata&&"uri" in hb.__metadata};var fI=function(hd,hb){var hc=hd&&hd.results||hd;return ac(hc)&&((!V(hb))&&(gE(hc[0])))};var eh=function(hb){return gU(eg,hb)};var aj=function(hb){return gU(aw,hb)};var aU=function(hd){if(!hd&&!gE(hd)){return false}var hc=hd.__metadata;var hb=hd.__mediaresource;return !hc&&!!hb&&!!hb.media_src};var cq=function(hb){return gf(hb)||typeof hb==="string"||typeof hb==="number"||typeof hb==="boolean"};var gz=function(hb){return gU(bt,hb)};var bO=function(hb,hc){if(ft(hb)){return"deferred"}if(e(hb)){return"entry"}if(fI(hb)){return"feed"}if(hc&&hc.relationship){if(hb===null||hb===gG||!fI(hb)){return"entry"}return"feed"}return null};var Q=function(hc,hb){return O(hc,function(hd){return hd.name===hb})};var eK=function(hb,hc,hd){return(hb)?b1(hc,function(he){return fP(hb,he,hd)}):null};var bI=function(hc,hb){return O(hc,function(hd){return hd.name===hb})};var cB=function(hb,hc){return eK(hb,hc,"complexType")};var bF=function(hb,hc){return eK(hb,hc,"entityType")};var du=function(hb){return b1(hb,function(hc){return O(hc.entityContainer,function(hd){return P(hd.isDefaultEntityContainer)})})};var ap=function(hb,hc){return eK(hb,hc,"entityContainer")};var dH=function(hb,hc){return O(hb,function(hd){return hd.name===hc})};var av=function(hg,hf){var hc=null;if(hg){var hb=hg.relationship;var he=b1(hf,function(hl){var hk=n(hl.namespace,hb);var hj=hl.association;if(hk&&hj){var hi,hh;for(hi=0,hh=hj.length;hi<hh;hi++){if(hj[hi].name===hk){return hj[hi]}}}});if(he){var hd=he.end[0];if(hd.role!==hg.toRole){hd=he.end[1]}hc=hd.type}}return hc};var n=function(hb,hc){if(hc.indexOf(hb)===0&&hc.charAt(hb.length)==="."){return hc.substr(hb.length+1)}return null};var fP=function(hb,he,hd){if(hb&&he){var hc=n(he.namespace,hb);if(hc){return O(he[hd],function(hf){return hf.name===hc})}}return null};var gk=function(hh,he){if(hh===he){return hh}var hi=hh.split(".");var hc=he.split(".");var hb=(hi.length>=hc.length)?hi.length:hc.length;for(var hd=0;hd<hb;hd++){var hg=hi[hd]&&cR(hi[hd]);var hf=hc[hd]&&cR(hc[hd]);if(hg>hf){return hh}if(hg<hf){return he}}};var br={accept:"Accept","content-type":"Content-Type",dataserviceversion:"DataServiceVersion",maxdataserviceversion:"MaxDataServiceVersion"};var cL=function(hf){for(var hc in hf){var hb=hc.toLowerCase();var hd=br[hb];if(hd&&hc!==hd){var he=hf[hc];delete hf[hc];hf[hd]=he}}};var P=function(hb){if(typeof hb==="boolean"){return hb}return typeof hb==="string"&&hb.toLowerCase()==="true"};var ea=/^(-?\d{4,})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?(.*)$/;var eT=function(hn,hd,hl){var hf=ea.exec(hn);var he=(hf)?eQ(hf[8]):null;if(!hf||(!hd&&he!=="Z")){if(hl){return null}throw {message:"Invalid date/time value"}}var hh=cR(hf[1]);if(hh<=0){hh++}var hb=hf[7];var hi=0;if(!hb){hb=0}else{if(hb.length>7){if(hl){return null}throw {message:"Cannot parse date/time value to given precision."}}hi=gC(hb.substring(3),4,true);hb=gC(hb.substring(0,3),3,true);hb=cR(hb);hi=cR(hi)}var hk=cR(hf[4]);var hc=cR(hf[5]);var hm=cR(hf[6]);if(he!=="Z"){var hg=gI(he);var hj=-(hg.d);hk+=hg.h*hj;hc+=hg.m*hj}var ho=new Date();ho.setUTCFullYear(hh,cR(hf[2])-1,cR(hf[3]));ho.setUTCHours(hk,hc,hm,hb);if(isNaN(ho.valueOf())){if(hl){return null}throw {message:"Invalid date/time value"}}if(hd){ho.__edmType="Edm.DateTimeOffset";ho.__offset=he}if(hi){ho.__ns=hi}return ho};var gv=function(hb,hc){return eT(hb,false,hc)};var dw=function(hb,hc){return eT(hb,true,hc)};var gH=/^([+-])?P(?:(\d+)Y)?(?:(\d+)M)?(?:(\d+)D)?(?:T(?:(\d+)H)?(?:(\d+)M)?(?:(\d+)(?:\.(\d+))?S)?)?/;var dp=function(hb){gH.test(hb)};var fB=function(hd){var hf=gH.exec(hd);if(hf===null){throw {message:"Invalid duration value."}}var hg=hf[2]||"0";var hc=hf[3]||"0";var hk=cR(hf[4]||0);var hi=cR(hf[5]||0);var he=cR(hf[6]||0);var hj=parseFloat(hf[7]||0);if(hg!=="0"||hc!=="0"){throw {message:"Unsupported duration value."}}var hb=hf[8];var hh=0;if(!hb){hb=0}else{if(hb.length>7){throw {message:"Cannot parse duration value to given precision."}}hh=gC(hb.substring(3),4,true);hb=gC(hb.substring(0,3),3,true);hb=cR(hb);hh=cR(hh)}hb+=hj*1000+he*60000+hi*3600000+hk*86400000;if(hf[1]==="-"){hb=-hb}var hl={ms:hb,__edmType:"Edm.Time"};if(hh){hl.ns=hh}return hl};var gI=function(hd){var he=hd.substring(0,1);he=(he==="+")?1:-1;var hb=cR(hd.substring(1));var hc=cR(hd.substring(hd.indexOf(":")+1));return{d:he,h:hb,m:hc}};var az=function(hd,hc,hb){if(!hd.method){hd.method="GET"}if(!hd.headers){hd.headers={}}else{cL(hd.headers)}if(hd.headers.Accept===gG){hd.headers.Accept=hc.accept}if(b8(hd.data)&&hd.body===gG){hc.write(hd,hb)}if(!b8(hd.headers.MaxDataServiceVersion)){hd.headers.MaxDataServiceVersion=hc.maxDataServiceVersion||"1.0"}};var dX=function(he,hc,hg){if(he&&typeof he==="object"){for(var hd in he){var hf=he[hd];var hb=dX(hf,hd,hg);hb=hg(hd,hb,hc);if(hb!==hf){if(hf===gG){delete he[hd]}else{he[hd]=hb}}}}return he};var aK=function(hb,hc){return hc("",dX(hb,"",hc))};var ay=0;var g4=function(hb){if(hb.method&&hb.method!=="GET"){return false}return true};var fd=function(hc){var he=eP.document.createElement("IFRAME");he.style.display="none";var hf=hc.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/\</g,"&lt;");var hd='<html><head><script type="text/javascript" src="'+hf+'"><\/script></head><body></body></html>';var hb=eP.document.getElementsByTagName("BODY")[0];hb.appendChild(he);dx(he,hd);return he};var da=function(){if(eP.XMLHttpRequest){return new eP.XMLHttpRequest()}var hc;if(eP.ActiveXObject){try{return new eP.ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(hb){try{return new eP.ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(hd){hc=hd}}}else{hc={message:"XMLHttpRequest not supported"}}throw hc};var cu=function(hb){return hb.indexOf("http://")===0||hb.indexOf("https://")===0||hb.indexOf("file://")===0};var K=function(hc){if(!cu(hc)){return true}var hb=eP.location;var hd=hb.protocol+"//"+hb.host+"/";return(hc.indexOf(hd)===0)};var aV=function(hb,hc){try{delete eP[hb]}catch(hd){eP[hb]=gG;if(hc===ay-1){ay-=1}}};var be=function(hb){if(hb){dx(hb,"");hb.parentNode.removeChild(hb)}return null};var e2=function(hf,he){var hd=hf.getAllResponseHeaders().split(/\r?\n/);var hc,hb;for(hc=0,hb=hd.length;hc<hb;hc++){if(hd[hc]){var hg=hd[hc].split(": ");he[hg[0]]=hg[1]}}};var dx=function(hd,hc){var hb=(hd.contentWindow)?hd.contentWindow.document:hd.contentDocument.document;hb.open();hb.write(hc);hb.close()};gb.defaultHttpClient={callbackParameterName:"$callback",formatQueryString:"$format=json",enableJsonpCallback:false,request:function(hf,hi,hr){var hm={};var hj=null;var hp=false;var hk;hm.abort=function(){hk=be(hk);if(hp){return}hp=true;if(hj){hj.abort();hj=null}hr({message:"Request aborted"})};var hc=function(){hk=be(hk);if(!hp){hp=true;hj=null;hr({message:"Request timed out"})}};var hu;var hg=hf.requestUri;var he=cC(hf.enableJsonpCallback,this.enableJsonpCallback);var hq=cC(hf.callbackParameterName,this.callbackParameterName);var hd=cC(hf.formatQueryString,this.formatQueryString);if(!he||K(hg)){hj=da();hj.onreadystatechange=function(){if(hp||hj===null||hj.readyState!==4){return}var hx=hj.statusText;var hw=hj.status;if(hw===1223){hw=204;hx="No Content"}var hy=[];e2(hj,hy);var hv={requestUri:hg,statusCode:hw,statusText:hx,headers:hy,body:hj.responseText};hp=true;hj=null;if(hw>=200&&hw<=299){hi(hv)}else{hr({message:"HTTP request failed",request:hf,response:hv})}};hj.open(hf.method||"GET",hg,true,hf.user,hf.password);if(hf.headers){for(hu in hf.headers){hj.setRequestHeader(hu,hf.headers[hu])}}if(hf.timeoutMS){hj.timeout=hf.timeoutMS;hj.ontimeout=hc}hj.send(hf.body)}else{var hs=ay;ay+=1;var ho=hs.toString();var ht=false;var hh;hu="handleJSONP_"+ho;eP[hu]=function(hv){hk=be(hk);if(!hp){ht=true;eP.clearTimeout(hh);aV(hu,hs);if(eP.ActiveXObject&&!eP.DOMParser){hv=eP.JSON.parse(eP.JSON.stringify(hv))}fi(hi,{body:hv,statusCode:200,headers:{"Content-Type":"application/json"}})}};var hb=(hf.timeoutMS)?hf.timeoutMS:120000;hh=eP.setTimeout(hc,hb);var hn=hq+"=parent."+hu;if(this.formatQueryString){hn+="&"+hd}var hl=hg.indexOf("?");if(hl===-1){hg=hg+"?"+hn}else{if(hl===hg.length-1){hg=hg+hn}else{hg=hg+"&"+hn}}hk=fd(hg)}return hm}};var gF="3.0";var fZ=function(hg){if(!hg){return null}var hd=hg.split(";");var hf={};var he,hc;for(he=1,hc=hd.length;he<hc;he++){var hb=hd[he].split("=");hf[fM(hb[0])]=hb[1]}return{mediaType:fM(hd[0]),properties:hf}};var fX=function(hd){if(!hd){return gG}var hb=hd.mediaType;var hc;for(hc in hd.properties){hb+=";"+hc+"="+hd.properties[hc]}return hb};var eB=function(hf,hd,hb,hc){var he={contentType:hf,dataServiceVersion:hd,handler:hc};return g6(he,hb)};var gK=function(hc,hb,hd){if(!hc){return}var he=hc.headers;if(!he[hb]){he[hb]=hd}};var ct=function(hc,hb){if(hc){var he=hc.headers;var hd=he.DataServiceVersion;he.DataServiceVersion=hd?gk(hd,hb):hb}};var fO=function(hc,hb){var hd=hc.headers;return(hd&&hd[hb])||gG};var f3=function(hb){return fZ(fO(hb,"Content-Type"))};var cF=/^\s?(\d+\.\d+);?.*$/;var f6=function(hb){var hd=fO(hb,"DataServiceVersion");if(hd){var hc=cF.exec(hd);if(hc&&hc.length){return hc[1]}}};var ba=function(hc,hb){return hc.accept.indexOf(hb.mediaType)>=0};var fU=function(hg,hh,he,hf){if(!he||!he.headers){return false}var hd=f3(he);var hc=f6(he)||"";var hb=he.body;if(!b8(hb)){return false}if(ba(hg,hd)){var hi=eB(hd,hc,hf,hg);hi.response=he;he.data=hh(hg,hb,hi);return he.data!==gG}return false};var aC=function(hf,hh,hg,he){if(!hg||!hg.headers){return false}var hc=f3(hg);var hb=f6(hg);if(!hc||ba(hf,hc)){var hd=eB(hc,hb,he,hf);hd.request=hg;hg.body=hh(hf,hg.data,hd);if(hg.body!==gG){ct(hg,hd.dataServiceVersion||"1.0");gK(hg,"Content-Type",fX(hd.contentType));gK(hg,"MaxDataServiceVersion",hf.maxDataServiceVersion);return true}}return false};var Z=function(hd,he,hb,hc){return{accept:hb,maxDataServiceVersion:hc,read:function(hf,hg){return fU(this,hd,hf,hg)},write:function(hg,hf){return aC(this,he,hg,hf)}}};var e3=function(hc,hb){return hb};var aP=function(hb,hc){if(b8(hc)){return hc.toString()}else{return gG}};gb.textHandler=Z(e3,aP,"text/plain",gF);var l=cg+"www.opengis.net";var d6=l+"/gml";var b9=l+"/def/crs/EPSG/0/";var aa="gml";var bj=function(hc,he,hd){var hb={type:hc};hb[he]=hd;return hb};var o=function(hc){if(ac(hc)&&hc.length>=2){var hb=hc[0];hc[0]=hc[1];hc[1]=hb}return hc};var X=function(hg,hd,hh,hc,hb,he){var hf=gL(hg,hh,hc,hb,he);return bj(hd,"coordinates",hf)};var gL=function(hf,hg,hd,hb,he){var hc=[];eu(hf,function(hk){if(ca(hk)!==d6){return}var hh=cv(hk);if(hh===hg){var hj=ex(hk,d6);if(hj){var hi=hb(hj,he);if(hi){hc.push(hi)}}return}if(hh===hd){eu(hk,function(hm){if(ca(hm)!==d6){return}var hl=hb(hm,he);if(hl){hc.push(hl)}})}});return hc};var dq=function(hd,hc){var hb=gL(hd,"geometryMember","geometryMembers",fR,hc);return bj(e8,"geometries",hb)};var bk=function(hc,hb){return bj(aS,"coordinates",fo(hc,hb))};var dJ=function(hc,hb){return X(hc,bS,"curveMember","curveMembers",fo,hb)};var eC=function(hc,hb){return X(hc,ep,"pointMember","pointMembers",A,hb)};var fQ=function(hc,hb){return X(hc,aN,"surfaceMember","surfaceMembers",cA,hb)};var ha=function(hc,hb){return bj(gR,"coordinates",A(hc,hb))};var cm=function(hc,hb){return bj(bu,"coordinates",cA(hc,hb))};var fo=function(hd,hb){var hc=[];eu(hd,function(hg){var hf=ca(hg);if(hf!==d6){return}var he=cv(hg);if(he==="posList"){hc=dP(hg,hb);return}if(he==="pointProperty"){hc.push(T(hg,hb));return}if(he==="pos"){hc.push(m(hg,hb));return}});return hc};var A=function(hc,hb){var hd=ex(hc,d6,"pos");return hd?m(hd,hb):[]};var T=function(hd,hc){var hb=ex(hd,d6,"Point");return hb?A(hb,hc):[]};var cA=function(he,hc){var hd=[];var hb=false;eu(he,function(hg){if(ca(hg)!==d6){return}var hf=cv(hg);if(hf==="exterior"){hb=true;hd.unshift(dM(hg,hc));return}if(hf==="interior"){hd.push(dM(hg,hc));return}});if(!hb&&hd.length>0){hd.unshift([[]])}return hd};var dM=function(hd,hc){var hb=[];eu(hd,function(he){if(ca(he)!==d6||cv(he)!=="LinearRing"){return}hb=fo(he,hc)});return hb};var dP=function(hg,he){var hf=m(hg,false);var hb=hf.length;if(hb%2!==0){throw {message:"GML posList element has an uneven number of numeric values"}}var hd=[];for(var hc=0;hc<hb;hc+=2){var hh=hf.slice(hc,hc+2);hd.push(he?o(hh):hh)}return hd};var m=function(hd,hj){var hh=[];var hg=" \t\r\n";var hi=d(hd);if(hi){var hf=hi.length;var hb=0;var hc=0;while(hc<=hf){if(hg.indexOf(hi.charAt(hc))!==-1){var he=hi.substring(hb,hc);if(he){hh.push(parseFloat(he))}hb=hc+1}hc++}}return hj?o(hh):hh};var fR=function(hh,hg){var he=cv(hh);var hb;switch(he){case"Point":hb=ha;break;case"Polygon":hb=cm;break;case"LineString":hb=bk;break;case"MultiPoint":hb=eC;break;case"MultiCurve":hb=dJ;break;case"MultiSurface":hb=fQ;break;case"MultiGeometry":hb=dq;break;default:throw {message:"Unsupported element: "+he,element:hh}}var hf=hb(hh,hg);var hd=eF(hh,"srsName",d6)||eF(hh,"srsName");if(hd){if(hd.indexOf(b9)!==0){throw {message:"Unsupported srs name: "+hd,element:hh}}var hc=hd.substring(b9.length);if(hc){hf.crs={type:"name",properties:{name:"EPSG:"+hc}}}}return hf};var eA=function(hd,hh,hf,hl){var hb;switch(hf){case gR:hb=eY;break;case aS:hb=al;break;case bu:hb=en;break;case ep:hb=dF;break;case bS:hb=x;break;case aN:hb=gP;break;case e8:hb=gc;break;default:return null}var hg=hb(hd,hh,hl);var hi=hh.crs;if(hi){if(hi.type==="name"){var he=hi.properties;var hc=he&&he.name;if(hc&&hc.indexOf("ESPG:")===0&&hc.length>5){var hk=hc.substring(5);var hj=bp(hd,null,"srsName",aa+hk);aZ(hg,hj)}}}return hg};var ad=function(hd,hb,hc){return g8(hd,d6,bi(aa,hb),hc)};var c2=function(he,hd,hc){var hb=ac(hd)?hd:[];hb=hc?o(hb):hb;return ad(he,"pos",hb.join(" "))};var ax=function(hh,hc,hg,hf){var he=ad(hh,hc);if(ac(hg)){var hd,hb;for(hd=0,hb=hg.length;hd<hb;hd++){aZ(he,c2(hh,hg[hd],hf))}if(hb===0){aZ(he,ad(hh,"posList"))}}return he};var c8=function(hd,hc,hb){return ad(hd,"Point",c2(hd,hc,hb))};var aA=function(hd,hc,hb){return ax(hd,"LineString",hc,hb)};var i=function(hg,hd,hf,he){var hb=ad(hg,hd);if(ac(hf)&&hf.length>0){var hc=ax(hg,"LinearRing",hf,he);aZ(hb,hc)}return hb};var er=function(hg,hf,he){var hb=hf&&hf.length;var hd=ad(hg,"Polygon");if(ac(hf)&&hb>0){aZ(hd,i(hg,"exterior",hf[0],he));var hc;for(hc=1;hc<hb;hc++){aZ(hd,i(hg,"interior",hf[hc],he))}}return hd};var eY=function(hd,hc,hb){return c8(hd,hc.coordinates,hb)};var al=function(hd,hc,hb){return aA(hd,hc.coordinates,hb)};var en=function(hd,hc,hb){return er(hd,hc.coordinates,hb)};var au=function(hd,hb,he,hi,hj,hk){var hh=hi&&hi.length;var hg=ad(hd,hb);if(ac(hi)&&hh>0){var hc=ad(hd,he);var hf;for(hf=0;hf<hh;hf++){aZ(hc,hj(hd,hi[hf],hk))}aZ(hg,hc)}return hg};var dF=function(hd,hc,hb){return au(hd,"MultiPoint","pointMembers",hc.coordinates,c8,hb)};var x=function(hd,hc,hb){return au(hd,"MultiCurve","curveMembers",hc.coordinates,aA,hb)};var gP=function(hd,hc,hb){return au(hd,"MultiSurface","surfaceMembers",hc.coordinates,er,hb)};var bG=function(hd,hc,hb){return eA(hd,hc,hc.type,hb)};var gc=function(hd,hc,hb){return au(hd,"MultiGeometry","geometryMembers",hc.geometries,bG,hb)};var L="application/xml";var bs=cg+"schemas.microsoft.com/ado/";var a1=bs+"2007/08/dataservices";var e0=bs+"2007/06/edmx";var gy=bs+"2006/04/edm";var ah=bs+"2007/05/edm";var ag=bs+"2008/01/edm";var c7=bs+"2008/09/edm";var c6=bs+"2009/08/edm";var gx=bs+"2009/11/edm";var gw=a1;var es=a1+"/metadata";var aR=a1+"/related/";var gu=a1+"/scheme";var e1="d";var g5="m";var dQ=function(hb,hc){var hd={name:cv(hb),value:hb.value};hd[hc?"namespaceURI":"namespace"]=ca(hb);return hd};var v=function(he,hd){var hk=[];var hb=[];var hg,hh;var hf=he.attributes;for(hg=0,hh=hf.length;hg<hh;hg++){var hi=hf[hg];if(ca(hi)!==gJ){hk.push(dQ(hi,hd))}}var hc=he.firstChild;while(hc!=null){if(hc.nodeType===1){hb.push(v(hc,hd))}hc=hc.nextSibling}var hj={name:cv(he),value:d(he),attributes:hk,children:hb};hj[hd?"namespaceURI":"namespace"]=ca(he);return hj};var s=function(hb){return ca(hb)===gw&&cv(hb)==="element"};var fr=function(hc,hb){return{type:hc,extensions:hb}};var f7=function(hd){if(ex(hd,d6)){return gW}var hc=ex(hd,gw);if(!hc){return gM}if(s(hc)){var hb=aD(hc,gw);if(hb&&s(hb)){return"Collection()"}}return null};var gV=function(he){var hd=null;var hb=false;var hc=[];fa(he,function(hg){var hi=ca(hg);var hf=cv(hg);var hh=b(hg);if(hi===es){if(hf==="null"){hb=(hh.toLowerCase()==="true");return}if(hf==="type"){hd=hh;return}}if(hi!==cY&&hi!==gJ){hc.push(dQ(hg,true));return}});return{type:(!hd&&hb?gM:hd),isNull:hb,extensions:hc}};var a6=function(hg){if(ca(hg)!==gw){return null}var hc=cv(hg);var hf=gV(hg);var hh=hf.isNull;var hd=hf.type;var he=fr(hd,hf.extensions);var hb=hh?null:fS(hg,hd,he);return{name:hc,value:hb,metadata:he}};var fS=function(he,hb,hc){if(!hb){hb=f7(he);hc.type=hb}var hd=eh(hb);if(hd||aj(hb)){return ge(he,hb,hd)}if(gz(hb)){return aI(he,hb)}if(V(hb)){return bc(he,hb,hc)}return b3(he,hb,hc)};var ge=function(hf,hb,he){var hc=ex(hf,d6);var hd=fR(hc,he);hd.__metadata={type:hb};return hd};var aI=function(hd,hc){var hb=b(hd)||"";switch(hc){case dR:return P(hb);case b2:case fH:case ds:case aY:case gM:return hb;case bn:case cD:case b5:case ae:return cR(hb);case fn:case eH:return parseFloat(hb);case cW:return fB(hb);case cN:return gv(hb);case gY:return dw(hb)}return hb};var b3=function(he,hc,hd){var hb={__metadata:{type:hc}};eu(he,function(hh){var hg=a6(hh);var hf=hg.name;hd.properties=hd.properties||{};hd.properties[hf]=hg.metadata;hb[hf]=hg.value});return hb};var bc=function(hg,hc,he){var hb=[];var hf=he.elements=[];var hd=dA(hc);eu(hg,function(hm){if(s(hm)){var hh=gV(hm);var hi=hh.extensions;var hl=hh.type||hd;var hk=fr(hl,hi);var hj=fS(hm,hl,hk);hb.push(hj);hf.push(hk)}});return{__metadata:{type:hc==="Collection()"?null:hc},results:hb}};var D=function(hd,hc){if(ca(hd)===gw){hc=a(hd,hc);var hb=cv(hd);if(hb==="links"){return bU(hd,hc)}if(hb==="uri"){return gh(hd,hc)}}return gG};var bU=function(hc,hd){var hb=[];eu(hc,function(he){if(cv(he)==="uri"&&ca(he)===gw){hb.push(gh(he,hd))}});return{results:hb}};var gh=function(hb,hd){var hc=d(hb)||"";return{uri:bv(hc,hd)}};var cZ=function(hb,hc){if(hc===gW||hc===cI){return hb&&hb.type}if(hc===gS||hc===c1){return gR}if(hc===gd||hc===gj){return aS}if(hc===d4||hc===dN){return bu}if(hc===eN||hc===eV){return e8}if(hc===f2||hc===b6){return aN}if(hc===ev||hc===bd){return bS}if(hc===bT||hc===eq){return ep}return null};var bX=function(hd,hb,hc){return g8(hd,es,bi(g5,hb),hc)};var an=function(hd,hb,hc){return bp(hd,es,bi(g5,hb),hc)};var a2=function(hd,hb,hc){return g8(hd,gw,bi(e1,hb),hc)};var eL=function(hc,hb){if(hb===cN||hb===gY||gf(hc)){return N(hc)}if(hb===cW){return I(hc)}return hc.toString()};var fz=function(hc,hb){return{element:hc,dsv:hb}};var fK=function(hg,hd,hc,he){var hb=hc?an(hg,"type",hc):null;var hf=a2(hg,hd,hb);return fA(hf,he)};var fk=function(hg,hd,hf,hc){var hb=eL(hf,hc);var he=fK(hg,hd,hc,hb);return fz(he,"1.0")};var f1=function(hh,he,hc,hd){var hb=an(hh,"null","true");var hg=fK(hh,he,hc,hb);var hf=cB(hc,hd)?"2.0":"1.0";return fz(hg,hf)};var bo=function(he,hb,hn,hm,hc,hi,hg){var hk=dA(hm);var hj=ac(hn)?hn:hn.results;var ho=hm?{type:hk}:{};ho.properties=hc.properties;var hl=fK(he,hb,hk?hm:null);var hf,hh;for(hf=0,hh=hj.length;hf<hh;hf++){var hd=hj[hf];var hp=eM(he,"element",hd,ho,hi,hg);aZ(hl,hp.element)}return fz(hl,"3.0")};var aX=function(hd,hb,hn,hm,hc,hq,hg){var hl=fK(hd,hb,hm);var hi=hc.properties||{};var hk=cB(hm,hg)||{};var hj="1.0";for(var hp in hn){if(hp!=="__metadata"){var ho=hn[hp];var hh=Q(hk.property,hp);var hf=hi[hp]||{};var he=eM(hd,hp,ho,hf,hh,hg);hj=gk(hj,he.dsv);aZ(hl,he.element)}}return fz(hl,hj)};var fW=function(hi,hd,hh,hc,hg){var hb=cZ(hh,hc);var hf=eA(hi,hh,hb,hg);var he=fK(hi,hd,hc,hf);return fz(he,"3.0")};var eM=function(hc,hb,hh,hd,hj,he){var hg=dU(hh,hd,hj);if(cq(hh)){return fk(hc,hb,hh,hg||gM)}var hi=eh(hg);if(hi||aj(hg)){return fW(hc,hb,hh,hg,hi)}if(by(hh,hg)){return bo(hc,hb,hh,hg,hd,hj,he)}if(aU(hh)){return null}var hf=bO(hh,hj);if(hf!==null){return null}if(hh===null){return f1(hc,hb,hg)}return aX(hc,hb,hh,hg,hd,hj,he)};var gB=function(hb){if(hb&&C(hb)){var hc=E();return aZ(hc,a2(hc,"uri",hb.uri))}};var bH=function(hc,he){if(he){var hd=aF(he);var hb=ex(hd);if(hb){return D(hb)}}};var cS=function(hd,he,hc){var hb=hc.contentType=hc.contentType||fZ(L);if(hb&&hb.mediaType===L){return aO(gB(he))}return gG};gb.xmlHandler=Z(bH,cS,L,gF);var fF="a";var ai=H+"2005/Atom";var a7=H+"2007/app";var fT=a1+"/edit-media/";var af=a1+"/mediaresource/";var a4=a1+"/relatedlinks/";var Y=["application/atom+xml","application/atomsvc+xml","application/xml"];var gm=Y[0];var g7=[ai,a7,cY,gJ];var cz={SyndicationAuthorEmail:"author/email",SyndicationAuthorName:"author/name",SyndicationAuthorUri:"author/uri",SyndicationContributorEmail:"contributor/email",SyndicationContributorName:"contributor/name",SyndicationContributorUri:"contributor/uri",SyndicationPublished:"published",SyndicationRights:"rights",SyndicationSummary:"summary",SyndicationTitle:"title",SyndicationUpdated:"updated"};var fs=function(hb){return cz[hb]||hb};var gl=function(hb){return !(gU(g7,hb))};var e5=function(hg,hi,hk,hl,hn){hn=hn||"";var hh=hg["FC_TargetPath"+hn];if(!hh){return null}var hb=hg["FC_SourcePath"+hn];var hm=fs(hh);var hj=hl?hl+(hb?"/"+hb:""):hb;var hd=hj&&h(hk,hi,hj);var hf=hg["FC_NsUri"+hn]||null;var he=hg["FC_NsPrefix"+hn]||null;var hc=hg["FC_KeepInContent"+hn]||"";if(hh!==hm){hf=ai;he=fF}return{contentKind:hg["FC_ContentKind"+hn],keepInContent:hc.toLowerCase()==="true",nsPrefix:he,nsURI:hf,propertyPath:hj,propertyType:hd,entryPath:hm}};var cn=function(hd,hg,hm){var hj=[];while(hd){var hb=hd.FC_SourcePath;var hf=e5(hd,hd,hg);if(hf){hm(hf)}var hi=hd.property||[];var he,hh;for(he=0,hh=hi.length;he<hh;he++){var hk=hi[he];var hc=0;var hl="";while(hf=e5(hk,hd,hg,hk.name,hl)){hm(hf);hc++;hl="_"+hc}}hd=bF(hd.baseType,hg)}return hj};var bD=function(hc){var hb=[];fa(hc,function(hd){var he=ca(hd);if(gl(he)){hb.push(dQ(hd,true))}});return hb};var gg=function(hb){return v(hb,true)};var dE=function(hd,hf,hc){var he=ca(hd);var hb=cv(hd);if(he===a7&&hb==="service"){return z(hd,hf)}if(he===ai){if(hb==="feed"){return gq(hd,hf,hc)}if(hb==="entry"){return aB(hd,hf,hc)}}};var fw=function(hd,he){var hc=[];var hb={extensions:hc};fa(hd,function(hg){var hf=cv(hg);var hi=ca(hg);var hh=b(hg);if(hi===null){if(hf==="title"||hf==="metadata"){hb[hf]=hh;return}if(hf==="target"){hb.target=bv(hh,a(hd,he));return}}if(gl(hi)){hc.push(dQ(hg,true))}});return hb};var c5=function(hd,he,hb){var hc=hb.actions=hb.actions||[];hc.push(fw(hd,he))};var eG=function(hd,he,hb){var hc=hb.functions=hb.functions||[];hc.push(fw(hd,he))};var gq=function(hg,hh,hb){var hd=bD(hg);var hf={feed_extensions:hd};var hc=[];var he={__metadata:hf,results:hc};hh=a(hg,hh);eu(hg,function(hk){var hj=ca(hk);var hi=cv(hk);if(hj===es){if(hi==="count"){he.__count=parseInt(d(hk));return}if(hi==="action"){c5(hk,hh,hf);return}if(hi==="function"){eG(hk,hh,hf);return}}if(gl(hj)){hd.push(v(hk));return}if(hi==="entry"){hc.push(aB(hk,hh,hb));return}if(hi==="link"){cQ(hk,he,hh);return}if(hi==="id"){hf.uri=bv(d(hk),hh);hf.uri_extensions=bD(hk);return}if(hi==="title"){hf.title=d(hk)||"";hf.title_extensions=bD(hk);return}});return he};var cQ=function(hh,hg,hi){var hf=dd(hh,hi);var hc=hf.href;var hb=hf.rel;var he=hf.extensions;var hd=hg.__metadata;if(hb==="next"){hg.__next=hc;hd.next_extensions=he;return}if(hb==="self"){hd.self=hc;hd.self_extensions=he;return}};var dd=function(hd,he){he=a(hd,he);var hb=[];var hc={extensions:hb,baseURI:he};fa(hd,function(hg){var hi=ca(hg);var hf=cv(hg);var hh=hg.value;if(hf==="href"){hc.href=bv(hh,he);return}if(hf==="type"||hf==="rel"){hc[hf]=hh;return}if(gl(hi)){hb.push(dQ(hg,true))}});if(!hc.href){throw {error:"href attribute missing on link element",element:hd}}return hc};var u=function(hf,hd){if(hf.indexOf("/")===-1){return hd[hf]}else{var he=hf.split("/");var hc,hb;for(hc=0,hb=he.length;hc<hb;hc++){if(hd===null){return gG}hd=hd[he[hc]];if(hd===gG){return hd}}return hd}};var ej=function(hm,hh,hk,hb){var hf;if(hm.indexOf("/")===-1){hh[hm]=hk;hf=hm}else{var hc=hm.split("/");var hd,hg;for(hd=0,hg=(hc.length-1);hd<hg;hd++){var he=hh[hc[hd]];if(he===gG){he={};hh[hc[hd]]=he}else{if(he===null){return}}hh=he}hf=hc[hd];hh[hf]=hk}if(hb){var hj=hh.__metadata=hh.__metadata||{};var hi=hj.properties=hj.properties||{};var hl=hi[hf]=hi[hf]||{};hl.type=hb}};var cU=function(he,hh,hf){var hg=he.propertyPath;if(he.keepInContent||u(hg,hf)===null){return}var hd=eJ(hh,he.nsURI,he.entryPath);if(!hd){return}var hc=he.propertyType;var hb;if(he.contentKind==="xhtml"){hb=dY(hd)}else{hb=aI(hd,hc||"Edm.String")}ej(hg,hf,hb,hc)};var h=function(hj,hb,hk){var he=hk.split("/");var hf,hh;while(hb){var hd=hb;for(hf=0,hh=he.length;hf<hh;hf++){var hi=hd.property;if(!hi){break}var hg=Q(hi,he[hf]);if(!hg){break}var hc=hg.type;if(!hc||gz(hc)){return hc||null}hd=cB(hc,hj);if(!hd){return null}}hb=bF(hb.baseType,hj)}return null};var aB=function(hg,hh,hb){var hf={};var he={__metadata:hf};var hc=eF(hg,"etag",es);if(hc){hf.etag=hc}hh=a(hg,hh);eu(hg,function(hk){var hj=ca(hk);var hi=cv(hk);if(hj===ai){if(hi==="id"){df(hk,hf,hh);return}if(hi==="category"){eU(hk,hf);return}if(hi==="content"){ef(hk,he,hf,hh);return}if(hi==="link"){dO(hk,he,hf,hh,hb);return}return}if(hj===es){if(hi==="properties"){eZ(hk,he,hf);return}if(hi==="action"){c5(hk,hh,hf);return}if(hi==="function"){eG(hk,hh,hf);return}}});var hd=bF(hf.type,hb);cn(hd,hb,function(hi){cU(hi,hg,he)});return he};var df=function(hc,hb,hd){hb.uri=bv(d(hc),a(hc,hd));hb.uri_extensions=bD(hc)};var eU=function(hd,hc){if(eF(hd,"scheme")===gu){if(hc.type){throw {message:"Invalid AtomPub document: multiple category elements defining the entry type were encounterd withing an entry",element:hd}}var hb=[];fa(hd,function(hf){var hg=ca(hf);var he=cv(hf);if(!hg){if(he!=="scheme"&&he!=="term"){hb.push(dQ(hf,true))}return}if(gl(hg)){hb.push(dQ(hf,true))}});hc.type=eF(hd,"term");hc.type_extensions=hb}};var ef=function(hf,hd,hc,hg){var he=eF(hf,"src");var hb=eF(hf,"type");if(he){if(!hb){throw {message:"Invalid AtomPub document: content element must specify the type attribute if the src attribute is also specified",element:hf}}hc.media_src=bv(he,a(hf,hg));hc.content_type=hb}eu(hf,function(hh){if(he){throw {message:"Invalid AtomPub document: content element must not have child elements if the src attribute is specified",element:hf}}if(ca(hh)===es&&cv(hh)==="properties"){eZ(hh,hd,hc)}})};var dO=function(hd,hi,hf,hc,he){var hh=dd(hd,hc);var hj=hh.rel;var hb=hh.href;var hg=hh.extensions;if(hj==="self"){hf.self=hb;hf.self_link_extensions=hg;return}if(hj==="edit"){hf.edit=hb;hf.edit_link_extensions=hg;return}if(hj==="edit-media"){hf.edit_media=hh.href;hf.edit_media_extensions=hg;em(hh,hf);return}if(hj.indexOf(fT)===0){ce(hh,hi,hf);return}if(hj.indexOf(af)===0){gQ(hh,hi,hf);return}if(hj.indexOf(aR)===0){U(hd,hh,hi,hf,he);return}if(hj.indexOf(a4)===0){ao(hh,hf);return}};var ao=function(he,hd){var hb=he.rel.substring(a4.length);hd.properties=hd.properties||{};var hc=hd.properties[hb]=hd.properties[hb]||{};hc.associationuri=he.href;hc.associationuri_extensions=he.extensions};var U=function(hf,hk,hl,hh,hg){var hb;var hc=ex(hf,es,"inline");if(hc){var hj=ex(hc);var hd=a(hc,hk.baseURI);hb=hj?dE(hj,hd,hg):null}else{hb={__deferred:{uri:hk.href}}}var hi=hk.rel.substring(aR.length);hl[hi]=hb;hh.properties=hh.properties||{};var he=hh.properties[hi]=hh.properties[hi]||{};he.extensions=hk.extensions};var ce=function(hh,hg,hf){var hc=hh.rel.substring(fT.length);var hb=eD(hc,hg,hf);var he=hb.value;var hi=hb.metadata;var hd=hh.href;he.edit_media=hd;he.content_type=hh.type;hi.edit_media_extensions=hh.extensions;he.media_src=he.media_src||hd;hi.media_src_extensions=hi.media_src_extensions||[];em(hh,he)};var gQ=function(hg,hf,he){var hc=hg.rel.substring(af.length);var hb=eD(hc,hf,he);var hd=hb.value;var hh=hb.metadata;hd.media_src=hg.href;hh.media_src_extensions=hg.extensions;hd.content_type=hg.type};var eD=function(hb,he,hd){hd.properties=hd.properties||{};var hf=hd.properties[hb];var hc=he[hb]&&he[hb].__mediaresource;if(!hc){hc={};he[hb]={__mediaresource:hc};hd.properties[hb]=hf={}}return{value:hc,metadata:hf}};var em=function(hf,hd){var he=hf.extensions;var hc,hb;for(hc=0,hb=he.length;hc<hb;hc++){if(he[hc].namespaceURI===es&&he[hc].name==="etag"){hd.media_etag=he[hc].value;he.splice(hc,1);return}}};var eZ=function(hd,hc,hb){eu(hd,function(hh){var hf=a6(hh);if(hf){var he=hf.name;var hg=hb.properties=hb.properties||{};hg[he]=hf.metadata;hc[he]=hf.value}})};var z=function(hd,he){var hc=[];var hb=[];he=a(hd,he);eu(hd,function(hf){if(ca(hf)===a7&&cv(hf)==="workspace"){hc.push(fq(hf,he));return}hb.push(v(hf))});if(hc.length===0){throw {message:"Invalid AtomPub service document: No workspace element found.",element:hd}}return{workspaces:hc,extensions:hb}};var fq=function(he,hf){var hc=[];var hb=[];var hd=gG;hf=a(he,hf);eu(he,function(hi){var hh=ca(hi);var hg=cv(hi);if(hh===ai){if(hg==="title"){if(hd!==gG){throw {message:"Invalid AtomPub service document: workspace has more than one child title element",element:hi}}hd=d(hi);return}}if(hh===a7){if(hg==="collection"){hc.push(aW(hi,hf))}return}hb.push(gg(hi))});return{title:hd||"",collections:hc,extensions:hb}};var aW=function(he,hf){var hb=eF(he,"href");if(!hb){throw {message:"Invalid AtomPub service document: collection has no href attribute",element:he}}hf=a(he,hf);hb=bv(hb,a(he,hf));var hc=[];var hd=gG;eu(he,function(hi){var hh=ca(hi);var hg=cv(hi);if(hh===ai){if(hg==="title"){if(hd!==gG){throw {message:"Invalid AtomPub service document: collection has more than one child title element",element:hi}}hd=d(hi)}return}if(hh!==a7){hc.push(gg(he))}});if(!hd){throw {message:"Invalid AtomPub service document: collection has no title element",element:he}}return{title:hd,href:hb,extensions:hc}};var f0=function(hd,hb,hc){return g8(hd,ai,bi(fF,hb),hc)};var ar=function(hd,hb,hc){return bp(hd,null,hb,hc)};var dm=function(hc){if(hc.childNodes.length>0){return false}var hg=true;var hd=hc.attributes;var he,hb;for(he=0,hb=hd.length;he<hb&&hg;he++){var hf=hd[he];hg=hg&&dr(hf)||(ca(hf)==es&&cv(hf)==="type")}return hg};var eo=function(hf,hd,he,hk,hg){var hb=null;var hh=null;var hj=null;var hc="";if(he!=="deferred"){hb=ar(hf,"type","application/atom+xml;type="+he);hh=bX(hf,"inline");if(hk){hc=hk.__metadata&&hk.__metadata.uri||"";hj=r(hf,hk,hg)||aH(hf,hk,hg);aZ(hh,hj.element)}}else{hc=hk.__deferred.uri}var hi=f0(hf,"link",[ar(hf,"href",hc),ar(hf,"rel",bv(hd,aR)),hb,hh]);return fz(hi,hj?hj.dsv:"1.0")};var c0=function(hi,he,hg,hh,hf,hd){if(aU(hg)){return null}var hb=eM(hi,he,hg,hh,hf,hd);if(!hb){var hc=bO(hg,hf);hb=eo(hi,he,hc,hg,hd)}return hb};var fy=function(hd,hk,hg,hf){var hl=g9(hg,gw,hf.propertyPath);var hc=hl&&ee(hl,"null",es);var hb;var hi="1.0";if(hc&&hc.value==="true"){return hi}if(hl){hb=d(hl)||"";if(!hf.keepInContent){hi="2.0";var hj=hl.parentNode;var hm=hj;hj.removeChild(hl);while(hm!==hg&&dm(hm)){hj=hm.parentNode;hj.removeChild(hm);hm=hj}}}var hh=bl(hd,hk,hf.nsURI,hf.nsPrefix,hf.entryPath);if(hh.nodeType===2){hh.value=hb;return hi}var he=hf.contentKind;fA(hh,[he&&bp(hd,null,"type",he),he==="xhtml"?fJ(hd,hb):hb]);return hi};var aH=function(hn,hr,hd){var ho=hr.__metadata||{};var hk=ho.properties||{};var hb=ho.etag;var hf=ho.uri;var hi=ho.type;var hm=bF(hi,hd);var hg=bX(hn,"properties");var hc=f0(hn,"entry",[f0(hn,"author",f0(hn,"name")),hb&&an(hn,"etag",hb),hf&&f0(hn,"id",hf),hi&&f0(hn,"category",[ar(hn,"term",hi),ar(hn,"scheme",gu)]),f0(hn,"content",[ar(hn,"type","application/xml"),hg])]);var hl="1.0";for(var hs in hr){if(hs!=="__metadata"){var hp=hk[hs]||{};var hq=hm&&(Q(hm.property,hs)||Q(hm.navigationProperty,hs));var he=c0(hn,hs,hr[hs],hp,hq,hd);if(he){var hh=he.element;var hj=(ca(hh)===ai)?hc:hg;aZ(hj,hh);hl=gk(hl,he.dsv)}}}cn(hm,hd,function(hu){var ht=fy(hn,hc,hg,hu);hl=gk(hl,ht)});return fz(hc,hl)};var r=function(hb,hd,hf){var hg=ac(hd)?hd:hd.results;if(!hg){return null}var hj="1.0";var hc=f0(hb,"feed");var he,hh;for(he=0,hh=hg.length;he<hh;he++){var hi=aH(hb,hg[he],hf);aZ(hc,hi.element);hj=gk(hj,hi.dsv)}return fz(hc,hj)};var bN=function(hf,hd){if(hf){var hb=fI(hf)&&r||C(hf)&&aH;if(hb){var hg=E();var hc=hb(hg,hf,hd);if(hc){var he=hc.element;fA(he,[cX(hg,es,g5),cX(hg,gw,e1)]);return fz(aZ(hg,he),hc.dsv)}}}return null};var gt=function(hc,he,hb){if(he){var hd=aF(he);var hf=ex(hd);if(hf){return dE(hf,null,hb.metadata)}}};var bP=function(hd,he,hc){var hb=hc.contentType=hc.contentType||fZ(gm);if(hb&&hb.mediaType===gm){var hf=bN(he,hc.metadata);if(hf){hc.dataServiceVersion=gk(hc.dataServiceVersion||"1.0",hf.dsv);return aO(hf.element)}}};gb.atomHandler=Z(gt,bP,Y.join(","),gF);var g3=function(hb,hd,he,hc){return{attributes:hb,elements:hd,text:he||false,ns:hc}};var d3={elements:{Annotations:g3(["Target","Qualifier"],["TypeAnnotation*","ValueAnnotation*"]),Association:g3(["Name"],["End*","ReferentialConstraint","TypeAnnotation*","ValueAnnotation*"]),AssociationSet:g3(["Name","Association"],["End*","TypeAnnotation*","ValueAnnotation*"]),Binary:g3(null,null,true),Bool:g3(null,null,true),Collection:g3(null,["String*","Int*","Float*","Decimal*","Bool*","DateTime*","DateTimeOffset*","Guid*","Binary*","Time*","Collection*","Record*"]),CollectionType:g3(["ElementType","Nullable","DefaultValue","MaxLength","FixedLength","Precision","Scale","Unicode","Collation","SRID"]["CollectionType","ReferenceType","RowType","TypeRef"]),ComplexType:g3(["Name","BaseType","Abstract"],["Property*","TypeAnnotation*","ValueAnnotation*"]),DateTime:g3(null,null,true),DateTimeOffset:g3(null,null,true),Decimal:g3(null,null,true),DefiningExpression:g3(null,null,true),Dependent:g3(["Role"],["PropertyRef*"]),Documentation:g3(null,null,true),End:g3(["Type","Role","Multiplicity","EntitySet"],["OnDelete"]),EntityContainer:g3(["Name","Extends"],["EntitySet*","AssociationSet*","FunctionImport*","TypeAnnotation*","ValueAnnotation*"]),EntitySet:g3(["Name","EntityType"],["TypeAnnotation*","ValueAnnotation*"]),EntityType:g3(["Name","BaseType","Abstract","OpenType"],["Key","Property*","NavigationProperty*","TypeAnnotation*","ValueAnnotation*"]),EnumType:g3(["Name","UnderlyingType","IsFlags"],["Member*"]),Float:g3(null,null,true),Function:g3(["Name","ReturnType"],["Parameter*","DefiningExpression","ReturnType","TypeAnnotation*","ValueAnnotation*"]),FunctionImport:g3(["Name","ReturnType","EntitySet","IsSideEffecting","IsComposable","IsBindable","EntitySetPath"],["Parameter*","ReturnType","TypeAnnotation*","ValueAnnotation*"]),Guid:g3(null,null,true),Int:g3(null,null,true),Key:g3(null,["PropertyRef*"]),LabeledElement:g3(["Name"],["Path","String","Int","Float","Decimal","Bool","DateTime","DateTimeOffset","Guid","Binary","Time","Collection","Record","LabeledElement","Null"]),Member:g3(["Name","Value"]),NavigationProperty:g3(["Name","Relationship","ToRole","FromRole","ContainsTarget"],["TypeAnnotation*","ValueAnnotation*"]),Null:g3(null,null),OnDelete:g3(["Action"]),Path:g3(null,null,true),Parameter:g3(["Name","Type","Mode","Nullable","DefaultValue","MaxLength","FixedLength","Precision","Scale","Unicode","Collation","ConcurrencyMode","SRID"],["CollectionType","ReferenceType","RowType","TypeRef","TypeAnnotation*","ValueAnnotation*"]),Principal:g3(["Role"],["PropertyRef*"]),Property:g3(["Name","Type","Nullable","DefaultValue","MaxLength","FixedLength","Precision","Scale","Unicode","Collation","ConcurrencyMode","CollectionKind","SRID"],["CollectionType","ReferenceType","RowType","TypeAnnotation*","ValueAnnotation*"]),PropertyRef:g3(["Name"]),PropertyValue:g3(["Property","Path","String","Int","Float","Decimal","Bool","DateTime","DateTimeOffset","Guid","Binary","Time"],["Path","String","Int","Float","Decimal","Bool","DateTime","DateTimeOffset","Guid","Binary","Time","Collection","Record","LabeledElement","Null"]),ReferenceType:g3(["Type"]),ReferentialConstraint:g3(null,["Principal","Dependent"]),ReturnType:g3(["ReturnType","Type","EntitySet"],["CollectionType","ReferenceType","RowType"]),RowType:g3(["Property*"]),String:g3(null,null,true),Schema:g3(["Namespace","Alias"],["Using*","EntityContainer*","EntityType*","Association*","ComplexType*","Function*","ValueTerm*","Annotations*"]),Time:g3(null,null,true),TypeAnnotation:g3(["Term","Qualifier"],["PropertyValue*"]),TypeRef:g3(["Type","Nullable","DefaultValue","MaxLength","FixedLength","Precision","Scale","Unicode","Collation","SRID"]),Using:g3(["Namespace","Alias"]),ValueAnnotation:g3(["Term","Qualifier","Path","String","Int","Float","Decimal","Bool","DateTime","DateTimeOffset","Guid","Binary","Time"],["Path","String","Int","Float","Decimal","Bool","DateTime","DateTimeOffset","Guid","Binary","Time","Collection","Record","LabeledElement","Null"]),ValueTerm:g3(["Name","Type"],["TypeAnnotation*","ValueAnnotation*"]),Edmx:g3(["Version"],["DataServices","Reference*","AnnotationsReference*"],false,e0),DataServices:g3(null,["Schema*"],false,e0)}};var g2=["m:FC_ContentKind","m:FC_KeepInContent","m:FC_NsPrefix","m:FC_NsUri","m:FC_SourcePath","m:FC_TargetPath"];d3.elements.Property.attributes=d3.elements.Property.attributes.concat(g2);d3.elements.EntityType.attributes=d3.elements.EntityType.attributes.concat(g2);d3.elements.Edmx={attributes:["Version"],elements:["DataServices"],ns:e0};d3.elements.DataServices={elements:["Schema*"],ns:e0};d3.elements.EntityContainer.attributes.push("m:IsDefaultEntityContainer");d3.elements.Property.attributes.push("m:MimeType");d3.elements.FunctionImport.attributes.push("m:HttpMethod");d3.elements.FunctionImport.attributes.push("m:IsAlwaysBindable");d3.elements.EntityType.attributes.push("m:HasStream");d3.elements.DataServices.attributes=["m:DataServiceVersion","m:MaxDataServiceVersion"];var dz=function(hc){if(!hc){return hc}if(hc.length>1){var hb=hc.substr(0,2);if(hb===hb.toUpperCase()){return hc}return hc.charAt(0).toLowerCase()+hc.substr(1)}return hc.charAt(0).toLowerCase()};var g0=function(hi,hf){if(hf==="Documentation"){return{isArray:true,propertyName:"documentation"}}var hh=hi.elements;if(!hh){return null}var hg,hc;for(hg=0,hc=hh.length;hg<hc;hg++){var hb=hh[hg];var he=false;if(hb.charAt(hb.length-1)==="*"){he=true;hb=hb.substr(0,hb.length-1)}if(hf===hb){var hd=dz(hb);return{isArray:he,propertyName:hd}}}return null};var cj=/^(m:FC_.*)_[0-9]+$/;var aG=function(hb){return hb===gy||hb===ah||hb===ag||hb===c7||hb===c6||hb===gx};var aq=function(he){var hd=cv(he);var hh=ca(he);var hb=d3.elements[hd];if(!hb){return null}if(hb.ns){if(hh!==hb.ns){return null}}else{if(!aG(hh)){return null}}var hg={};var hf=[];var hc=hb.attributes||[];fa(he,function(hk){var hi=cv(hk);var ho=ca(hk);var hl=hk.value;if(ho===gJ){return}var hn=null;var hm=false;if(aG(ho)||ho===null){hn=""}else{if(ho===es){hn="m:"}}if(hn!==null){hn+=hi;var hj=cj.exec(hn);if(hj){hn=hj[1]}if(gU(hc,hn)){hm=true;hg[dz(hi)]=hl}}if(!hm){hf.push(dQ(hk))}});eu(he,function(hl){var hj=cv(hl);var hk=g0(hb,hj);if(hk){if(hk.isArray){var hi=hg[hk.propertyName];if(!hi){hi=[];hg[hk.propertyName]=hi}hi.push(aq(hl))}else{hg[hk.propertyName]=aq(hl)}}else{hf.push(v(hl))}});if(hb.text){hg.text=d(he)}if(hf.length){hg.extensions=hf}return hg};var dT=function(hc,he){var hd=aF(he);var hb=ex(hd);return aq(hb)||gG};gb.metadataHandler=Z(dT,null,L,gF);var bE="o";var fm="f";var eO="p";var gp="c";var f="s";var b0="l";var gi="odata";var q=gi+".";var gT="@"+q+"bind";var cp=q+"metadata";var bx=q+"navigationLinkUrl";var dI=q+"type";var a9={readLink:"self",editLink:"edit",nextLink:"__next",mediaReadLink:"media_src",mediaEditLink:"edit_media",mediaContentType:"content_type",mediaETag:"media_etag",count:"__count",media_src:"mediaReadLink",edit_media:"mediaEditLink",content_type:"mediaContentType",media_etag:"mediaETag",url:"uri"};var aJ=function(hb){if(hb.indexOf(".")>0){var he=hb.indexOf("@");var hd=he>-1?hb.substring(0,he):null;var hc=hb.substring(he+1);return{target:hd,name:hc,isOData:hc.indexOf(q)===0}}return null};var bQ=function(hd,hf,hb,he,hc){return(gE(hf)&&hf[dI])||(hb&&hb[hd+"@"+dI])||(he&&he.type)||(av(he,hc))||null};var d2=function(hb,hc){if(hc){return Q(hc.property,hb)||Q(hc.navigationProperty,hb)}return null};var e9=function(hb){return gE(hb)&&hb.hasOwnProperty(q+"id")};var g1=function(hb,he,hc){if(!!he[hb+"@"+bx]||(hc&&hc.relationship)){return true}var hd=ac(he[hb])?he[hb][0]:he[hb];return e9(hd)};var ek=function(hb){return gz(hb)||eh(hb)||aj(hb)};var t=function(hg,hf,he,hk,hh){for(var hd in hg){if(hd.indexOf(".")>0&&hd.charAt(0)!=="#"){var hl=aJ(hd);if(hl){var hj=hl.name;var hi=hl.target;var hc=null;var hb=null;if(hi){hc=d2(hi,hk);hb=bQ(hi,hg[hi],hg,hc,hh)}if(hl.isOData){eb(hj,hi,hb,hg[hd],hg,hf,he)}else{hf[hd]=hg[hd]}}}}return hf};5;var eb=function(hc,hh,hf,he,hd,hg,hi){var hb=hc.substring(q.length);switch(hb){case"navigationLinkUrl":d0(hb,hh,hf,he,hd,hg,hi);return;case"nextLink":case"count":e6(hb,hh,he,hg,hi);return;case"mediaReadLink":case"mediaEditLink":case"mediaContentType":case"mediaETag":at(hb,hh,hf,he,hg,hi);return;default:fv(hb,hh,he,hg,hi);return}};var fv=function(hb,hg,hi,he,hd){var hh=he.__metadata=he.__metadata||{};var hj=a9[hb]||hb;if(hb==="editLink"){hh.uri=bv(hi,hd);hh[hj]=hh.uri;return}if(hb==="readLink"||hb==="associationLinkUrl"){hi=bv(hi,hd)}if(hg){var hf=hh.properties=hh.properties||{};var hc=hf[hg]=hf[hg]||{};if(hb==="type"){hc[hj]=hc[hj]||hi;return}hc[hj]=hi;return}hh[hj]=hi};var e6=function(hb,hg,he,hf,hh){var hc=a9[hb];var hd=hg?hf[hg]:hf;hd[hc]=(hb==="nextLink")?bv(he,hh):he};var at=function(hc,hh,hb,hj,hf,he){var hi=hf.__metadata=hf.__metadata||{};var hk=a9[hc];if(hc==="mediaReadLink"||hc==="mediaEditLink"){hj=bv(hj,he)}if(hh){var hg=hi.properties=hi.properties||{};var hd=hg[hh]=hg[hh]||{};hd.type=hd.type||hb;hf.__metadata=hi;hf[hh]=hf[hh]||{__mediaresource:{}};hf[hh].__mediaresource[hk]=hj;return}hi[hk]=hj};var d0=function(hc,hj,hb,hl,hh,hg,hf){var hk=hg.__metadata=hg.__metadata||{};var hi=hk.properties=hk.properties||{};var he=hi[hj]=hi[hj]||{};var hd=bv(hl,hf);if(hh.hasOwnProperty(hj)){he.navigationLinkUrl=hd;return}hg[hj]={__deferred:{uri:hd}};he.type=he.type||hb};var ak=function(hf,hb,hg,hh,he,hc,hd){if(typeof hf==="string"){return gA(hf,hb,hd)}if(!ek(hb)){if(ac(hf)){return bL(hf,hb,hg,hh,hc,hd)}if(gE(hf)){return ed(hf,hb,hg,hh,hc,hd)}}return hf};var gA=function(hd,hc,hb){switch(hc){case cW:return fB(hd);case cN:return gv(hd,false);case gY:return dw(hd,false)}if(hb){return gv(hd,true)||dw(hd,true)||hd}return hd};var bL=function(hk,hb,hd,hc,hf,hi){var ho=dA(hb);var hm=[];var hj=[];var he,hg;for(he=0,hg=hk.length;he<hg;he++){var hh=bQ(null,hk[he])||ho;var hl={type:hh};var hn=ak(hk[he],hh,hl,hc,null,hf,hi);if(!ek(hh)&&!cq(hk[he])){hm.push(hl)}hj.push(hn)}if(hm.length>0){hd.elements=hm}return{__metadata:{type:hb},results:hj}};var ed=function(hj,hb,hd,hc,he,hi){var hh=fh(hj,hb,hc,he,hi);var hf=hh.__metadata;var hg=hf.properties;if(hg){hd.properties=hg;delete hf.properties}return hh};var a8=function(he,hd,hf,hb,hc){if(ac(he)){return R(he,hd,hf,hb,hc)}if(gE(he)){return fh(he,hd,hf,hb,hc)}return null};var fh=function(hh,hp,he,hj,hk){var hl=hh[dI]||hp;var hm=bF(hl,hj)||cB(hl,hj);var hn={type:hl};var hg={__metadata:hn};var hi={};for(var hb in hh){if(hb.indexOf("#")===0){a3(hb.substring(1),hh[hb],hg,he,hj)}else{if(hb.indexOf(".")===-1){if(!hn.properties){hn.properties=hi}var hf=hh[hb];var hq=d2(hb,hm);var ho=g1(hb,hh,hq);var hc=bQ(hb,hf,hh,hq,hj);var hd=hi[hb]=hi[hb]||{type:hc};hg[hb]=ho?a8(hf,hc,he,hj,hk):ak(hf,hc,hd,he,hq,hj,hk)}}}return t(hh,hg,he,hm,hj)};var a3=function(hu,hn,hi,ht,hd){if(!hu||!ac(hn)&&!gE(hn)){return}var hb=false;var hg=hu.lastIndexOf(".");var hk=hu.substring(hg+1);var hc=(hg>-1)?hu.substring(0,hg):"";var hj=(hk===hu||hc.indexOf(".")===-1)?du(hd):ap(hc,hd);if(hj){var ho=dH(hj.functionImport,hk);if(ho&&!!ho.isSideEffecting){hb=!P(ho.isSideEffecting)}}var hh=hi.__metadata;var hl=hb?"functions":"actions";var he=bv(hu,ht);var hm=(ac(hn))?hn:[hn];var hq,hr;for(hq=0,hr=hm.length;hq<hr;hq++){var hs=hm[hq];if(hs){var hp=hh[hl]=hh[hl]||[];var hf={metadata:he,title:hs.title,target:bv(hs.target,ht)};hp.push(hf)}}};var R=function(hd,hk,hc,hf,hi){var hj=ac(hd)?hd:hd.value;var hg=[];var he,hh;for(he=0,hh=hj.length;he<hh;he++){hg.push(fh(hj[he],hk,hc,hf,hi))}var hl={results:hg};if(gE(hd)){for(var hb in hd){if(hb.indexOf("#")===0){hl.__metadata=hl.__metadata||{};a3(hb.substring(1),hd[hb],hl,hc,hf)}}hl=t(hd,hl,hc)}return hl};var M=function(hf,hb,hg,hd){var hc={type:hb};var he=ak(hf.value,hb,hc,hg,null,null,hd);return t(hf,{__metadata:hc,value:he},hg)};var aQ=function(hg,hb,hh,hc,hd){var he={};var hf=bL(hg.value,hb,he,hh,hc,hd);g6(hf.__metadata,he);return t(hg,hf,hh)};var eE=function(hg,hh){var hd=hg.value;if(!ac(hd)){return ey(hg,hh)}var hf=[];var he,hb;for(he=0,hb=hd.length;he<hb;he++){hf.push(ey(hd[he],hh))}var hc={results:hf};return t(hg,hc,hh)};var ey=function(he,hf){var hd={uri:bv(he.url,hf)};hd=t(he,hd,hf);var hc=hd.__metadata||{};var hb=hc.properties||{};et(hb.url);d1(hb,"url","uri");return hd};var et=function(hb){if(hb){delete hb.type}};var cf=function(he,hb){var hj=he.value;var hg=[];var hc=t(he,{collections:hg},hb);var hk=hc.__metadata||{};var hd=hk.properties||{};et(hd.value);d1(hd,"value","collections");var hf,hi;for(hf=0,hi=hj.length;hf<hi;hf++){var hl=hj[hf];var hh={title:hl.name,href:bv(hl.url,hb)};hh=t(hl,hh,hb);hk=hh.__metadata||{};hd=hk.properties||{};et(hd.name);et(hd.url);d1(hd,"name","title");d1(hd,"url","href");hg.push(hh)}return{workspaces:[hc]}};var w=function(hc,hb){return{kind:hc,type:hb||null}};var f9=function(hi,hj,hk){var hm=hi[cp];if(!hm||typeof hm!=="string"){return null}var hc=hm.lastIndexOf("#");if(hc===-1){return w(f)}var ho=hm.indexOf("@Element",hc);var he=ho-1;if(he<0){he=hm.indexOf("?",hc);if(he===-1){he=hm.length}}var hl=hm.substring(hc+1,he);if(hl.indexOf("/$links/")>0){return w(b0)}var hh=hl.split("/");if(hh.length>=0){var hf=hh[0];var hq=hh[1];if(ek(hf)){return w(eO,hf)}if(V(hf)){return w(gp,hf)}var hg=hq;if(!hq){var hp=hf.lastIndexOf(".");var hn=hf.substring(hp+1);var hb=(hn===hf)?du(hj):ap(hf.substring(0,hp),hj);if(hb){var hd=bI(hb.entitySet,hn);hg=!!hd?hd.entityType:null}}if(ho>0){return w(bE,hg)}if(hg){return w(fm,hg)}if(ac(hi.value)&&!cB(hf,hj)){var hr=hi.value[0];if(!cq(hr)){if(e9(hr)||!hk){return w(fm,null)}}}return w(bE,hf)}return null};var ec=function(hf,hd,he,hc){if(!gE(hf)){return hf}var hh=hf[cp];var hg=f9(hf,hd,hc);var hb=null;if(hg){delete hf[cp];hb=hg.type;switch(hg.kind){case fm:return R(hf,hb,hh,hd,he);case gp:return aQ(hf,hb,hh,hd,he);case eO:return M(hf,hb,hh,he);case f:return cf(hf,hh);case b0:return eE(hf,hh)}}return fh(hf,hb,hh,hd,he)};var cJ=["type","etag","media_src","edit_media","content_type","media_etag"];var p=function(hf,hc){var hd=/\/\$links\//;var he={};var hb=hf.__metadata;var hg=hc&&hd.test(hc.request.requestUri);fg(hf,(hb&&hb.properties),he,hg);return he};var d9=function(he,hg){if(he){var hd,hb;for(hd=0,hb=cJ.length;hd<hb;hd++){var hc=cJ[hd];var hf=q+(a9[hc]||hc);d8(hf,null,he[hc],hg)}}};var fg=function(hg,hd,hf,hc){for(var hb in hg){var he=hg[hb];if(hb==="__metadata"){d9(he,hf)}else{if(hb.indexOf(".")===-1){if(hc&&hb==="uri"){bw(he,hf)}else{cE(hb,he,hd,hf,hc)}}else{hf[hb]=he}}}};var cE=function(hc,hg,he,hf){var hd=he&&he[hc]||{properties:gG,type:gG};var hb=dU(hg,hd);if(cq(hg)||!hg){d8(dI,hc,hb,hf);hf[hc]=hg;return}if(fI(hg,hb)||e(hg)){c4(hc,hg,hf);return}if(!hb&&ft(hg)){dv(hc,hg,hf);return}if(by(hg,hb)){if(dA(hb)){d8(dI,hc,hb,hf)}db(hc,hg,hf);return}hf[hc]={};d8(dI,null,hb,hf[hc]);fg(hg,hd.properties,hf[hc])};var bw=function(hc,hb){hb.url=hc};var dv=function(hb,hd,hc){d8(bx,hb,hd.__deferred.uri,hc)};var db=function(hc,he,hd){hd[hc]=[];var hb=ac(he)?he:he.results;fg(hb,null,hd[hc])};var c4=function(hd,hg,hf){if(fI(hg)){hf[hd]=[];var hc=ac(hg)?hg:hg.results;var he,hb;for(he=0,hb=hc.length;he<hb;he++){gD(hd,hc[he],true,hf)}return}gD(hd,hg,false,hf)};var gD=function(hc,hg,hb,hf){var he=hg.__metadata&&hg.__metadata.uri;if(he){bW(hc,he,hb,hf);return}var hd=p(hg);if(hb){hf[hc].push(hd);return}hf[hc]=hd};var bW=function(hc,he,hb,hf){var hd=hc+gT;if(hb){hf[hd]=hf[hd]||[];hf[hd].push(he);return}hf[hd]=he};var d8=function(hd,he,hc,hb){if(hc!==gG){he?hb[he+"@"+hd]=hc:hb[hd]=hc}};var G="application/json";var cl=fZ(G);var ci=function(he){var hc=[];for(name in he){var hd,hb;for(hd=0,hb=he[name].length;hd<hb;hd++){hc.push(g6({metadata:name},he[name][hd]))}}return hc};var gO=function(hn,hl,he,hj){if(hn&&typeof hn==="object"){var hf;var hc=hn.__metadata;if(hc){if(hc.actions){hc.actions=ci(hc.actions)}if(hc.functions){hc.functions=ci(hc.functions)}hf=hc&&hc.type}var hm=bF(hf,hl)||cB(hf,hl);if(hm){var hk=hm.property;if(hk){var hg,hi;for(hg=0,hi=hk.length;hg<hi;hg++){var ho=hk[hg];var hh=ho.name;var hd=hn[hh];if(ho.type==="Edm.DateTime"||ho.type==="Edm.DateTimeOffset"){if(hd){hd=he(hd);if(!hd){throw {message:"Invalid date/time value"}}hn[hh]=hd}}else{if(ho.type==="Edm.Time"){hn[hh]=fB(hd)}}}}}else{if(hj){for(var hb in hn){hd=hn[hb];if(typeof hd==="string"){hn[hb]=he(hd)||hd}}}}}return hn};var dL=function(hc){if(hc){var hb=hc.properties.odata;return hb==="nometadata"||hb==="minimalmetadata"||hb==="fullmetadata"}return false};var cr=function(he,hh){var hc={collections:[]};var hd,hb;for(hd=0,hb=he.EntitySets.length;hd<hb;hd++){var hg=he.EntitySets[hd];var hf={title:hg,href:bv(hg,hh)};hc.collections.push(hf)}return{workspaces:[hc]}};var d7=/^\/Date\((-?\d+)(\+|-)?(\d+)?\)\/$/;var y=function(hd){var hc;if(hd<0){hc="-";hd=-hd}else{hc="+"}var hb=Math.floor(hd/60);hd=hd-(60*hb);return hc+gC(hb,2)+":"+gC(hd,2)};var f4=function(he){var hc=he&&d7.exec(he);if(hc){var hb=new Date(cR(hc[1]));if(hc[2]){var hd=cR(hc[3]);if(hc[2]==="-"){hd=-hd}var hf=hb.getUTCMinutes();hb.setUTCMinutes(hf-hd);hb.__edmType="Edm.DateTimeOffset";hb.__offset=y(hd)}if(!isNaN(hb.valueOf())){return hb}}};var aM=function(hj,hh,hb){var hf=cC(hb.recognizeDates,hj.recognizeDates);var hg=cC(hb.inferJsonLightFeedAsObject,hj.inferJsonLightFeedAsObject);var hd=hb.metadata;var he=hb.dataServiceVersion;var hc=f4;var hi=(typeof hh==="string")?eP.JSON.parse(hh):hh;if((gk("3.0",he)===he)){if(dL(hb.contentType)){return ec(hi,hd,hf,hg)}hc=gv}hi=aK(hi.d,function(hk,hl){return gO(hl,hd,hc,hf)});hi=bb(hi,hb.dataServiceVersion);return cd(hi,hb.response.requestUri)};var e4=function(hd){var hb=gG;var hc=Date.prototype.toJSON;try{Date.prototype.toJSON=function(){return N(this)};hb=eP.JSON.stringify(hd,fe)}finally{Date.prototype.toJSON=hc}return hb};var dD=function(he,hg,hd){var hf=hd.dataServiceVersion||"1.0";var hh=cC(hd.useJsonLight,he.useJsonLight);var hb=hd.contentType=hd.contentType||cl;if(hb&&hb.mediaType===cl.mediaType){var hc=hg;if(hh||dL(hb)){hd.dataServiceVersion=gk(hf,"3.0");hc=p(hg,hd);return e4(hc)}if(gk("3.0",hf)===hf){hb.properties.odata="verbose";hd.contentType=hb}return e4(hc)}return gG};var fe=function(hb,hc){if(hc&&hc.__edmType==="Edm.Time"){return I(hc)}else{return hc}};var cd=function(hc,hd){var hb=gE(hc)&&!hc.__metadata&&ac(hc.EntitySets);return hb?cr(hc,hd):hc};var bb=function(hb,hc){if(hc&&hc.lastIndexOf(";")===hc.length-1){hc=hc.substr(0,hc.length-1)}if(!hc||hc==="1.0"){if(ac(hb)){hb={results:hb}}}return hb};var b4=Z(aM,dD,G,gF);b4.recognizeDates=false;b4.useJsonLight=false;b4.inferJsonLightFeedAsObject=false;gb.jsonHandler=b4;var dc="multipart/mixed";var ch=/^HTTP\/1\.\d (\d{3}) (.*)$/i;var F=/^([^()<>@,;:\\"\/[\]?={} \t]+)\s?:\s?(.*)/;var c3=function(){return Math.floor((1+Math.random())*65536).toString(16).substr(1)};var fp=function(hb){return hb+c3()+"-"+c3()+"-"+c3()};var a0=function(hb){return hb.handler.partHandler};var fN=function(hc){var hb=hc.boundaries;return hb[hb.length-1]};var dg=function(hc,hd,hb){var he=hb.contentType.properties.boundary;return{__batchResponses:dS(hd,{boundaries:[he],handlerContext:hb})}};var fL=function(hd,he,hc){var hb=hc.contentType=hc.contentType||fZ(dc);if(hb.mediaType===dc){return cO(he,hc)}};var dS=function(hk,hc){var hb="--"+fN(hc);eX(hk,hc,hb);gZ(hk,hc);var hf=[];var hi;while(hi!=="--"&&hc.position<hk.length){var hj=fj(hk,hc);var he=fZ(hj["Content-Type"]);if(he&&he.mediaType===dc){hc.boundaries.push(he.properties.boundary);try{var hh=dS(hk,hc)}catch(hg){hg.response=c(hk,hc,hb);hh=[hg]}hf.push({__changeResponses:hh});hc.boundaries.pop();eX(hk,hc,"--"+fN(hc))}else{if(!he||he.mediaType!=="application/http"){throw {message:"invalid MIME part type "}}gZ(hk,hc);var hd=c(hk,hc,hb);try{if(hd.statusCode>=200&&hd.statusCode<=299){a0(hc.handlerContext).read(hd,hc.handlerContext)}else{hd={message:"HTTP request failed",response:hd}}}catch(hg){hd=hg}hf.push(hd)}hi=hk.substr(hc.position,2);gZ(hk,hc)}return hf};var fj=function(hf,hc){var he={};var hd;var hb;var hg;do{hg=hc.position;hb=gZ(hf,hc);hd=F.exec(hb);if(hd!==null){he[hd[1]]=hd[2]}else{hc.position=hg}}while(hb&&hd);cL(he);return he};var c=function(hh,hd,hb){var hi=hd.position;var hc=ch.exec(gZ(hh,hd));var he;var hf;var hg;if(hc){he=hc[1];hf=hc[2];hg=fj(hh,hd);gZ(hh,hd)}else{hd.position=hi}return{statusCode:he,statusText:hf,headers:hg,body:eX(hh,hd,"\r\n"+hb)}};var gZ=function(hc,hb){return eX(hc,hb,"\r\n")};var eX=function(he,hc,hd){var hf=hc.position||0;var hb=he.length;if(hd){hb=he.indexOf(hd,hf);if(hb===-1){return null}hc.position=hb+hd.length}else{hc.position=hb}return he.substring(hf,hb)};var cO=function(hi,hg){if(!fx(hi)){throw {message:"Data is not a batch object."}}var hc=fp("batch_");var hh=hi.__batchRequests;var he="";var hf,hb;for(hf=0,hb=hh.length;hf<hb;hf++){he+=fD(hc,false)+aE(hh[hf],hg)}he+=fD(hc,true);var hd=hg.contentType.properties;hd.boundary=hc;return he};var fD=function(hd,hc){var hb="\r\n--"+hd;if(hc){hb+="--"}return hb+"\r\n"};var aE=function(hd,hc,hh){var hb=hd.__changeRequests;var hj;if(ac(hb)){if(hh){throw {message:"Not Supported: change set nested in other change set"}}var hi=fp("changeset_");hj="Content-Type: "+dc+"; boundary="+hi+"\r\n";var he,hf;for(he=0,hf=hb.length;he<hf;he++){hj+=fD(hi,false)+aE(hb[he],hc,true)}hj+=fD(hi,true)}else{hj="Content-Type: application/http\r\nContent-Transfer-Encoding: binary\r\n\r\n";var hg=g6({},hc);hg.handler=Z;hg.request=hd;hg.contentType=null;az(hd,a0(hc),hg);hj+=cs(hd)}return hj};var cs=function(hd){var hb=(hd.method?hd.method:"GET")+" "+hd.requestUri+" HTTP/1.1\r\n";for(var hc in hd.headers){if(hd.headers[hc]){hb=hb+hc+": "+hd.headers[hc]+"\r\n"}}hb+="\r\n";if(hd.body){hb+=hd.body}return hb};gb.batchHandler=Z(dg,fL,dc,gF);var b7=[gb.jsonHandler,gb.atomHandler,gb.xmlHandler,gb.textHandler];var dC=function(he,hf,hd){var hc,hb;for(hc=0,hb=b7.length;hc<hb&&!b7[hc][he](hf,hd);hc++){}if(hc===hb){throw {message:"no handler for data"}}};gb.defaultSuccess=function(hb){eP.alert(eP.JSON.stringify(hb))};gb.defaultError=bJ;gb.defaultHandler={read:function(hb,hc){if(hb&&b8(hb.body)&&hb.headers["Content-Type"]){dC("read",hb,hc)}},write:function(hc,hb){dC("write",hc,hb)},maxDataServiceVersion:gF,accept:"application/atomsvc+xml;q=0.8, application/json;odata=fullmetadata;q=0.7, application/json;q=0.5, */*;q=0.1"};gb.defaultMetadata=[];gb.read=function(hh,hg,hc,he,hb,hd){var hf;if(hh instanceof String||typeof hh==="string"){hf={requestUri:hh}}else{hf=hh}return gb.request(hf,hg,hc,he,hb,hd)};gb.request=function(hh,hi,hc,hf,hb,he){hi=hi||gb.defaultSuccess;hc=hc||gb.defaultError;hf=hf||gb.defaultHandler;hb=hb||gb.defaultHttpClient;he=he||gb.defaultMetadata;hh.recognizeDates=cC(hh.recognizeDates,gb.jsonHandler.recognizeDates);hh.callbackParameterName=cC(hh.callbackParameterName,gb.defaultHttpClient.callbackParameterName);hh.formatQueryString=cC(hh.formatQueryString,gb.defaultHttpClient.formatQueryString);hh.enableJsonpCallback=cC(hh.enableJsonpCallback,gb.defaultHttpClient.enableJsonpCallback);hh.useJsonLight=cC(hh.useJsonLight,gb.jsonHandler.enableJsonpCallback);hh.inferJsonLightFeedAsObject=cC(hh.inferJsonLightFeedAsObject,gb.jsonHandler.inferJsonLightFeedAsObject);var hd={metadata:he,recognizeDates:hh.recognizeDates,callbackParameterName:hh.callbackParameterName,formatQueryString:hh.formatQueryString,enableJsonpCallback:hh.enableJsonpCallback,useJsonLight:hh.useJsonLight,inferJsonLightFeedAsObject:hh.inferJsonLightFeedAsObject};try{az(hh,hf,hd);return g(hh,hi,hc,hf,hb,hd)}catch(hg){hc(hg)}};gb.batchHandler.partHandler=gb.defaultHandler;var cM=null;var J=function(){var hc={v:this.valueOf(),t:"[object Date]"};for(var hb in this){hc[hb]=this[hb]}return hc};var gN=function(hc,hd){if(hd&&hd.t==="[object Date]"){var he=new Date(hd.v);for(var hb in hd){if(hb!=="t"&&hb!=="v"){he[hb]=hd[hb]}}hd=he}return hd};var gs=function(hb,hc){return hb.name+"#!#"+hc};var aT=function(hb,hc){return hc.replace(hb.name+"#!#","")};var bZ=function(hb){this.name=hb};bZ.create=function(hb){if(bZ.isSupported()){cM=cM||eP.localStorage;return new bZ(hb)}throw {message:"Web Storage not supported by the browser"}};bZ.isSupported=function(){return !!eP.localStorage};bZ.prototype.add=function(hd,he,hf,hc){hc=hc||this.defaultError;var hb=this;this.contains(hd,function(hg){if(!hg){hb.addOrUpdate(hd,he,hf,hc)}else{fi(hc,{message:"key already exists",key:hd})}},hc)};bZ.prototype.addOrUpdate=function(he,hf,hi,hc){hc=hc||this.defaultError;if(he instanceof Array){hc({message:"Array of keys not supported"})}else{var hb=gs(this,he);var hd=Date.prototype.toJSON;try{var hh=hf;if(hh!==gG){Date.prototype.toJSON=J;hh=eP.JSON.stringify(hf)}cM.setItem(hb,hh);fi(hi,he,hf)}catch(hg){if(hg.code===22||hg.number===2147942414){fi(hc,{name:"QUOTA_EXCEEDED_ERR",error:hg})}else{fi(hc,hg)}}finally{Date.prototype.toJSON=hd}}};bZ.prototype.clear=function(hh,hd){hd=hd||this.defaultError;try{var hf=0,hb=cM.length;while(hb>0&&hf<hb){var hc=cM.key(hf);var he=aT(this,hc);if(hc!==he){cM.removeItem(hc);hb=cM.length}else{hf++}}fi(hh)}catch(hg){fi(hd,hg)}};bZ.prototype.close=function(){};bZ.prototype.contains=function(hd,hg,hc){hc=hc||this.defaultError;try{var hb=gs(this,hd);var he=cM.getItem(hb);fi(hg,he!==null)}catch(hf){fi(hc,hf)}};bZ.prototype.defaultError=bJ;bZ.prototype.getAllKeys=function(hi,hd){hd=hd||this.defaultError;var hg=[];var hf,hb;try{for(hf=0,hb=cM.length;hf<hb;hf++){var hc=cM.key(hf);var he=aT(this,hc);if(hc!==he){hg.push(he)}}fi(hi,hg)}catch(hh){fi(hd,hh)}};bZ.prototype.mechanism="dom";bZ.prototype.read=function(hd,hg,hc){hc=hc||this.defaultError;if(hd instanceof Array){hc({message:"Array of keys not supported"})}else{try{var hb=gs(this,hd);var he=cM.getItem(hb);if(he!==null&&he!=="undefined"){he=eP.JSON.parse(he,gN)}else{he=gG}fi(hg,hd,he)}catch(hf){fi(hc,hf)}}};bZ.prototype.remove=function(hd,hf,hc){hc=hc||this.defaultError;if(hd instanceof Array){hc({message:"Batches not supported"})}else{try{var hb=gs(this,hd);cM.removeItem(hb);fi(hf)}catch(he){fi(hc,he)}}};bZ.prototype.update=function(hd,he,hf,hc){hc=hc||this.defaultError;var hb=this;this.contains(hd,function(hg){if(hg){hb.addOrUpdate(hd,he,hf,hc)}else{fi(hc,{message:"key not found",key:hd})}},hc)};var bV=eP.mozIndexedDB||eP.webkitIndexedDB||eP.msIndexedDB||eP.indexedDB;var fY=eP.IDBKeyRange||eP.webkitIDBKeyRange;var dy=eP.IDBTransaction||eP.webkitIDBTransaction||{};var cx=dy.READ_ONLY||"readonly";var bA=dy.READ_WRITE||"readwrite";var ff=function(hb,hc){return function(hh){var hg=hb||hc;if(!hg){return}if(Object.prototype.toString.call(hh)==="[object IDBDatabaseException]"){if(hh.code===11){hg({name:"QuotaExceededError",error:hh});return}hg(hh);return}var hd;try{var hf=hh.target.error||hh;hd=hf.name}catch(he){hd=(hh.type==="blocked")?"IndexedDBBlocked":"UnknownError"}hg({name:hd,error:hh})}};var cK=function(hb,hg,hd){var hc=hb.name;var hf="_datajs_"+hc;var he=bV.open(hf);he.onblocked=hd;he.onerror=hd;he.onupgradeneeded=function(){var hh=he.result;if(!hh.objectStoreNames.contains(hc)){hh.createObjectStore(hc)}};he.onsuccess=function(hi){var hh=he.result;if(!hh.objectStoreNames.contains(hc)){if("setVersion" in hh){var hj=hh.setVersion("1.0");hj.onsuccess=function(){var hk=hj.transaction;hk.oncomplete=function(){hg(hh)};hh.createObjectStore(hc,null,false)};hj.onerror=hd;hj.onblocked=hd;return}hi.target.error={name:"DBSchemaMismatch"};hd(hi);return}hh.onversionchange=function(hk){hk.target.close()};hg(hh)}};var f8=function(hc,hh,hg,he){var hd=hc.name;var hf=hc.db;var hb=ff(he,hc.defaultError);if(hf){hg(hf.transaction(hd,hh));return}cK(hc,function(hi){hc.db=hi;hg(hi.transaction(hd,hh))},hb)};var bh=function(hb){this.name=hb};bh.create=function(hb){if(bh.isSupported()){return new bh(hb)}throw {message:"IndexedDB is not supported on this browser"}};bh.isSupported=function(){return !!bV};bh.prototype.add=function(he,hg,hi,hd){var hc=this.name;var hh=this.defaultError;var hf=[];var hb=[];if(he instanceof Array){hf=he;hb=hg}else{hf=[he];hb=[hg]}f8(this,bA,function(hk){hk.onabort=ff(hd,hh,he,"add");hk.oncomplete=function(){if(he instanceof Array){hi(hf,hb)}else{hi(he,hg)}};for(var hj=0;hj<hf.length&&hj<hb.length;hj++){hk.objectStore(hc).add({v:hb[hj]},hf[hj])}},hd)};bh.prototype.addOrUpdate=function(he,hg,hi,hd){var hc=this.name;var hh=this.defaultError;var hf=[];var hb=[];if(he instanceof Array){hf=he;hb=hg}else{hf=[he];hb=[hg]}f8(this,bA,function(hl){hl.onabort=ff(hd,hh);hl.oncomplete=function(){if(he instanceof Array){hi(hf,hb)}else{hi(he,hg)}};for(var hk=0;hk<hf.length&&hk<hb.length;hk++){var hj={v:hb[hk]};hl.objectStore(hc).put(hj,hf[hk])}},hd)};bh.prototype.clear=function(he,hc){var hb=this.name;var hd=this.defaultError;f8(this,bA,function(hf){hf.onerror=ff(hc,hd);hf.oncomplete=function(){he()};hf.objectStore(hb).clear()},hc)};bh.prototype.close=function(){if(this.db){this.db.close();this.db=null}};bh.prototype.contains=function(hd,hf,hc){var hb=this.name;var he=this.defaultError;f8(this,cx,function(hi){var hh=hi.objectStore(hb);var hg=hh.get(hd);hi.oncomplete=function(){hf(!!hg.result)};hi.onerror=ff(hc,he)},hc)};bh.prototype.defaultError=bJ;bh.prototype.getAllKeys=function(he,hc){var hb=this.name;var hd=this.defaultError;f8(this,bA,function(hh){var hf=[];hh.oncomplete=function(){he(hf)};var hg=hh.objectStore(hb).openCursor();hg.onerror=ff(hc,hd);hg.onsuccess=function(hi){var hj=hi.target.result;if(hj){hf.push(hj.key);hj["continue"].call(hj)}}},hc)};bh.prototype.mechanism="indexeddb";bh.prototype.read=function(hd,hg,hc){var hb=this.name;var hf=this.defaultError;var he=(hd instanceof Array)?hd:[hd];f8(this,cx,function(hl){var hh=[];hl.onerror=ff(hc,hf,hd,"read");hl.oncomplete=function(){if(hd instanceof Array){hg(he,hh)}else{hg(he[0],hh[0])}};for(var hi=0;hi<he.length;hi++){var hk=hl.objectStore(hb);var hj=hk.get.call(hk,he[hi]);hj.onsuccess=function(hn){var hm=hn.target.result;hh.push(hm?hm.v:gG)}}},hc)};bh.prototype.remove=function(hd,hg,hc){var hb=this.name;var hf=this.defaultError;var he=(hd instanceof Array)?hd:[hd];f8(this,bA,function(hj){hj.onerror=ff(hc,hf);hj.oncomplete=function(){hg()};for(var hh=0;hh<he.length;hh++){var hi=hj.objectStore(hb);hi["delete"].call(hi,he[hh])}},hc)};bh.prototype.update=function(he,hg,hi,hd){var hc=this.name;var hh=this.defaultError;var hf=[];var hb=[];if(he instanceof Array){hf=he;hb=hg}else{hf=[he];hb=[hg]}f8(this,bA,function(hm){hm.onabort=ff(hd,hh);hm.oncomplete=function(){if(he instanceof Array){hi(hf,hb)}else{hi(he,hg)}};for(var hk=0;hk<hf.length&&hk<hb.length;hk++){var hl=hm.objectStore(hc).openCursor(fY.only(hf[hk]));var hj={v:hb[hk]};hl.pair={key:hf[hk],value:hj};hl.onsuccess=function(hn){var ho=hn.target.result;if(ho){ho.update(hn.target.pair.value)}else{hm.abort()}}}},hd)};var bM=function(hd){var hb=[];var hc=[];var hf={};this.name=hd;var hg=function(hh){return hh||this.defaultError};var he=function(hj,hh){var hi;if(hj instanceof Array){hi="Array of keys not supported"}if(hj===gG||hj===null){hi="Invalid key"}if(hi){fi(hh,{message:hi});return false}return true};this.add=function(hi,hj,hk,hh){hh=hg(hh);if(he(hi,hh)){if(!hf.hasOwnProperty(hi)){this.addOrUpdate(hi,hj,hk,hh)}else{hh({message:"key already exists",key:hi})}}};this.addOrUpdate=function(hj,hk,hl,hi){hi=hg(hi);if(he(hj,hi)){var hh=hf[hj];if(hh===gG){if(hb.length>0){hh=hb.splice(0,1)}else{hh=hc.length}}hc[hh]=hk;hf[hj]=hh;fi(hl,hj,hk)}};this.clear=function(hh){hc=[];hf={};hb=[];fi(hh)};this.contains=function(hi,hj){var hh=hf.hasOwnProperty(hi);fi(hj,hh)};this.getAllKeys=function(hj){var hi=[];for(var hh in hf){hi.push(hh)}fi(hj,hi)};this.read=function(hj,hk,hi){hi=hg(hi);if(he(hj,hi)){var hh=hf[hj];fi(hk,hj,hc[hh])}};this.remove=function(hj,hk,hi){hi=hg(hi);if(he(hj,hi)){var hh=hf[hj];if(hh!==gG){if(hh===hc.length-1){hc.pop()}else{hc[hh]=gG;hb.push(hh)}delete hf[hj];if(hc.length===0){hb=[]}}fi(hk)}};this.update=function(hi,hj,hk,hh){hh=hg(hh);if(he(hi,hh)){if(hf.hasOwnProperty(hi)){this.addOrUpdate(hi,hj,hk,hh)}else{hh({message:"key not found",key:hi})}}}};bM.create=function(hb){return new bM(hb)};bM.isSupported=function(){return true};bM.prototype.close=function(){};bM.prototype.defaultError=bJ;bM.prototype.mechanism="memory";var ab={indexeddb:bh,dom:bZ,memory:bM};f5.defaultStoreMechanism="best";f5.createStore=function(hc,hd){if(!hd){hd=f5.defaultStoreMechanism}if(hd==="best"){hd=(bZ.isSupported())?"dom":"memory"}var hb=ab[hd];if(hb){return hb.create(hc)}throw {message:"Failed to create store",name:hc,mechanism:hd}};var bg=function(hc,hb){var hd=(hc.indexOf("?")>=0)?"&":"?";return hc+hd+hb};var fC=function(he,hd){var hc=he.indexOf("?");var hb="";if(hc>=0){hb=he.substr(hc);he=he.substr(0,hc)}if(he[he.length-1]!=="/"){he+="/"}return he+hd+hb};var S=function(hc,hb){return{method:"GET",requestUri:hc,user:hb.user,password:hb.password,enableJsonpCallback:hb.enableJsonpCallback,callbackParameterName:hb.callbackParameterName,formatQueryString:hb.formatQueryString}};var am=function(hd,hc){var hb=-1;var hf=hd.indexOf("?");if(hf!==-1){var he=hd.indexOf("?"+hc+"=",hf);if(he===-1){he=hd.indexOf("&"+hc+"=",hf)}if(he!==-1){hb=he+hc.length+2}}return hb};var bf=function(he,hc,hf,hb){var hd=dB(he,hc,[],hf,hb);return hd};var dB=function(hf,hc,hg,hh,hb){var he=S(hf,hc);var hd=gb.request(he,function(hk){var hj=hk.__next;var hi=hk.results;hg=hg.concat(hi);if(hj){hd=dB(hj,hc,hg,hh,hb)}else{hh(hg)}},hb,gG,hc.httpClient,hc.metadata);return{abort:function(){hd.abort()}}};var go=function(hb){var hd=this;var hc=hb.source;hd.identifier=fu(encodeURI(decodeURI(hc)));hd.options=hb;hd.count=function(hg,hf){var he=hd.options;return gb.request(S(fC(hc,"$count"),he),function(hi){var hh=cR(hi.toString());if(isNaN(hh)){hf({message:"Count is NaN",count:hh})}else{hg(hh)}},hf,gG,he.httpClient,he.metadata)};hd.read=function(hg,hh,hi,hf){var he="$skip="+hg+"&$top="+hh;return bf(bg(hc,he),hd.options,hi,hf)};return hd};var dK=function(hc,hd){var hf=bY(hc,hd);if(hf){var he=hf.i-hd.i;var hb=he+(hc.c-hc.d.length);hc.d=hc.d.concat(hd.d.slice(he,hb))}};var bY=function(hd,hh){var hg=hd.i+hd.c;var hf=hh.i+hh.c;var hc=(hd.i>hh.i)?hd.i:hh.i;var he=(hg<hf)?hg:hf;var hb;if(he>=hc){hb={i:hc,c:he-hc}}return hb};var de=function(hc,hb){if(hc===gG||typeof hc!=="number"){throw {message:"'"+hb+"' must be a number."}}if(isNaN(hc)||hc<0||!isFinite(hc)){throw {message:"'"+hb+"' must be greater than or equal to zero."}}};var eW=function(hc,hb){if(hc!==gG){if(typeof hc!=="number"){throw {message:"'"+hb+"' must be a number."}}if(isNaN(hc)||hc<=0||!isFinite(hc)){throw {message:"'"+hb+"' must be greater than zero."}}}};var fb=function(hc,hb){if(hc!==gG&&(typeof hc!=="number"||isNaN(hc)||!isFinite(hc))){throw {message:"'"+hb+"' must be a number."}}};var dh=function(hc,he){var hd,hb;for(hd=0,hb=hc.length;hd<hb;hd++){if(hc[hd]===he){hc.splice(hd,1);return true}}return false};var cT=function(he){var hc=0;var hd=typeof he;if(hd==="object"&&he){for(var hb in he){hc+=hb.length*2+cT(he[hb])}}else{if(hd==="string"){hc=he.length*2}else{hc=8}}return hc};var fV=function(hc,hd,hb){hc=Math.floor(hc/hb)*hb;hd=Math.ceil((hd+1)/hb)*hb;return{i:hc,c:hd-hc}};var dG="destroy";var ez="idle";var a5="init";var bC="read";var d5="prefetch";var W="write";var eS="cancel";var bm="end";var cP="error";var gX="start";var di="wait";var gr="clear";var bK="done";var ei="local";var gn="save";var B="source";var bz=function(he,hm,hl,hj,hi,hg,hb){var hd;var hc;var hh=this;hh.p=hm;hh.i=hj;hh.c=hi;hh.d=hg;hh.s=gX;hh.canceled=false;hh.pending=hb;hh.oncomplete=null;hh.cancel=function(){if(!hl){return}var hn=hh.s;if(hn!==cP&&hn!==bm&&hn!==eS){hh.canceled=true;hk(eS,hd)}};hh.complete=function(){hk(bm,hd)};hh.error=function(hn){if(!hh.canceled){hk(cP,hn)}};hh.run=function(hn){hc=hn;hh.transition(hh.s,hd)};hh.wait=function(hn){hk(di,hn)};var hf=function(ho,hp,hn){switch(ho){case gX:if(hp!==a5){he(hh,ho,hp,hn)}break;case di:he(hh,ho,hp,hn);break;case eS:he(hh,ho,hp,hn);hh.fireCanceled();hk(bm);break;case cP:he(hh,ho,hp,hn);hh.canceled=true;hh.fireRejected(hn);hk(bm);break;case bm:if(hh.oncomplete){hh.oncomplete(hh)}if(!hh.canceled){hh.fireResolved()}he(hh,ho,hp,hn);break;default:he(hh,ho,hp,hn);break}};var hk=function(ho,hn){hh.s=ho;hd=hn;hf(ho,hc,hn)};hh.transition=hk;return hh};bz.prototype.fireResolved=function(){var hb=this.p;if(hb){this.p=null;hb.resolve(this.d)}};bz.prototype.fireRejected=function(hc){var hb=this.p;if(hb){this.p=null;hb.reject(hc)}};bz.prototype.fireCanceled=function(){this.fireRejected({canceled:true,message:"Operation canceled"})};var fE=function(hs){var hO=a5;var hH={counts:0,netReads:0,prefetches:0,cacheReads:0};var hN=[];var hy=[];var hI=[];var hf=0;var hk=false;var he=cy(hs.cacheSize,1048576);var hl=0;var hF=0;var hA=0;var hn=he===0;var hu=cy(hs.pageSize,50);var ho=cy(hs.prefetchSize,hu);var hL="1.0";var ht;var hh=0;var hq=hs.source;if(typeof hq==="string"){hq=new go(hs)}hq.options=hs;var hc=f5.createStore(hs.name,hs.mechanism);var hz=this;hz.onidle=hs.idle;hz.stats=hH;hz.count=function(){if(ht){throw ht}var hQ=bq();var hP=false;if(hk){fi(function(){hQ.resolve(hl)});return hQ.promise()}var hR=hq.count(function(hS){hR=null;hH.counts++;hQ.resolve(hS)},function(hS){hR=null;hQ.reject(g6(hS,{canceled:hP}))});return g6(hQ.promise(),{cancel:function(){if(hR){hP=true;hR.abort();hR=null}}})};hz.clear=function(){if(ht){throw ht}if(hN.length===0){var hP=bq();var hQ=new bz(hg,hP,false);hJ(hQ,hN);return hP.promise()}return hN[0].p};hz.filterForward=function(hQ,hR,hP){return hx(hQ,hR,hP,false)};hz.filterBack=function(hQ,hR,hP){return hx(hQ,hR,hP,true)};hz.readRange=function(hQ,hR){de(hQ,"index");de(hR,"count");if(ht){throw ht}var hP=bq();var hS=new bz(hB,hP,true,hQ,hR,[],0);hJ(hS,hy);return g6(hP.promise(),{cancel:function(){hS.cancel()}})};hz.ToObservable=hz.toObservable=function(){if(!eP.Rx||!eP.Rx.Observable){throw {message:"Rx library not available - include rx.js"}}if(ht){throw ht}return eP.Rx.Observable.CreateWithDisposable(function(hT){var hS=false;var hR=0;var hQ=function(hU){if(!hS){hT.OnError(hU)}};var hP=function(hW){if(!hS){var hV,hU;for(hV=0,hU=hW.length;hV<hU;hV++){hT.OnNext(hW[hV])}if(hW.length<hu){hT.OnCompleted()}else{hR+=hu;hz.readRange(hR,hu).then(hP,hQ)}}};hz.readRange(hR,hu).then(hP,hQ);return{Dispose:function(){hS=true}}})};var hC=function(hP){return function(hR){ht={message:hP,error:hR};var hS,hQ;for(hS=0,hQ=hy.length;hS<hQ;hS++){hy[hS].fireRejected(ht)}for(hS=0,hQ=hN.length;hS<hQ;hS++){hN[hS].fireRejected(ht)}hy=hN=null}};var hM=function(hS){if(hS!==hO){hO=hS;var hQ=hN.concat(hy,hI);var hR,hP;for(hR=0,hP=hQ.length;hR<hP;hR++){hQ[hR].run(hO)}}};var hm=function(){var hP=new dk();hc.clear(function(){hf=0;hk=false;hl=0;hF=0;hA=0;hn=he===0;hH={counts:0,netReads:0,prefetches:0,cacheReads:0};hz.stats=hH;hc.close();hP.resolve()},function(hQ){hP.reject(hQ)});return hP};var hG=function(hP){var hQ=dh(hN,hP);if(!hQ){hQ=dh(hy,hP);if(!hQ){dh(hI,hP)}}hh--;hM(ez)};var hi=function(hS){var hQ=new dk();var hP=false;var hR=hq.read(hS,hu,function(hU){var hT={i:hS,c:hU.length,d:hU};hQ.resolve(hT)},function(hT){hQ.reject(hT)});return g6(hQ,{cancel:function(){if(hR){hR.abort();hP=true;hR=null}}})};var hx=function(hU,hT,hZ,hY){hU=cR(hU);hT=cR(hT);if(isNaN(hU)){throw {message:"'index' must be a valid number.",index:hU}}if(isNaN(hT)){throw {message:"'count' must be a valid number.",count:hT}}if(ht){throw ht}hU=Math.max(hU,0);var h0=bq();var hQ=[];var hR=false;var hS=null;var hP=function(h1,h2){if(!hR){if(hT>=0&&hQ.length>=hT){h0.resolve(hQ)}else{hS=hz.readRange(h1,h2).then(function(h9){for(var h6=0,h8=h9.length;h6<h8&&(hT<0||hQ.length<hT);h6++){var h5=hY?h8-h6-1:h6;var h7=h9[h5];if(hZ(h7)){var h4={index:h1+h5,item:h7};hY?hQ.unshift(h4):hQ.push(h4)}}if((!hY&&h9.length<h2)||(hY&&h1<=0)){h0.resolve(hQ)}else{var h3=hY?Math.max(h1-hu,0):h1+h2;hP(h3,hu)}},function(h3){h0.reject(h3)})}}};var hV=fV(hU,hU,hu);var hX=hY?hV.i:hU;var hW=hY?hU-hV.i+1:hV.i+hV.c-hU;hP(hX,hW);return g6(h0.promise(),{cancel:function(){if(hS){hS.cancel()}hR=true}})};var hE=function(){if(hz.onidle&&hh===0){hz.onidle()}};var hK=function(hQ){if(hk||ho===0||hn){return}if(hI.length===0||(hI[0]&&hI[0].c!==-1)){var hP=new bz(hw,null,true,hQ,ho,null,ho);hJ(hP,hI)}};var hJ=function(hQ,hP){hQ.oncomplete=hG;hP.push(hQ);hh++;hQ.run(hO)};var hD=function(hS){var hP=false;var hQ=g6(new dk(),{cancel:function(){hP=true}});var hR=hd(hQ,"Read page from store failure");hc.contains(hS,function(hT){if(hP){return}if(hT){hc.read(hS,function(hU,hV){if(!hP){hQ.resolve(hV!==gG,hV)}},hR);return}hQ.resolve(false)},hR);return hQ};var hr=function(hS,hU){var hP=false;var hQ=g6(new dk(),{cancel:function(){hP=true}});var hR=hd(hQ,"Save page to store failure");var hT=function(){hQ.resolve(true)};if(hU.c>0){var hV=cT(hU);hn=he>=0&&he<hf+hV;if(!hn){hc.addOrUpdate(hS,hU,function(){hv(hU,hV);hj(hT,hR)},hR)}else{hT()}}else{hv(hU,0);hj(hT,hR)}return hQ};var hj=function(hR,hP){var hQ={actualCacheSize:hf,allDataLocal:hk,cacheSize:he,collectionCount:hl,highestSavedPage:hF,highestSavedPageSize:hA,pageSize:hu,sourceId:hq.identifier,version:hL};hc.addOrUpdate("__settings",hQ,hR,hP)};var hd=function(hP){return function(){hP.resolve(false)}};var hv=function(hR,hS){var hQ=hR.c;var hP=hR.i;if(hQ===0){if(hF===hP-hu){hl=hF+hA}}else{hF=Math.max(hF,hP);if(hF===hP){hA=hQ}hf+=hS;if(hQ<hu&&!hl){hl=hP+hQ}}if(!hk&&hl===hF+hA){hk=true}};var hb=function(hQ,hS,hT,hR){var hP=hQ.canceled&&hS!==bm;if(hP){if(hS===eS){if(hR&&hR.cancel){hR.cancel()}}}return hP};var hg=function(hP,hQ,hS){var hR=hP.transition;if(hS!==dG){hM(dG);return true}switch(hQ){case gX:hR(gr);break;case bm:hE();break;case gr:hm().then(function(){hP.complete()});hP.wait();break;default:return false}return true};var hw=function(hP,hR,hU,hQ){if(!hb(hP,hR,hU,hQ)){var hT=hP.transition;if(hU!==d5){if(hU===dG){if(hR!==eS){hP.cancel()}}else{if(hU===ez){hM(d5)}}return true}switch(hR){case gX:if(hI[0]===hP){hT(ei,hP.i)}break;case bK:var hS=hP.pending;if(hS>0){hS-=Math.min(hS,hQ.c)}if(hk||hS===0||hQ.c<hu||hn){hP.complete()}else{hP.pending=hS;hT(ei,hQ.i+hu)}break;default:return hp(hP,hR,hU,hQ,true)}}return true};var hB=function(hR,hT,hV,hS){if(!hb(hR,hT,hV,hS)){var hU=hR.transition;if(hV!==bC&&hT!==gX){if(hV===dG){if(hT!==gX){hR.cancel()}}else{if(hV!==W){hM(bC)}}return true}switch(hT){case gX:if(hV===ez||hV===d5){hM(bC);if(hR.c>0){var hQ=fV(hR.i,hR.c,hu);hU(ei,hQ.i)}else{hU(bK,hR)}}break;case bK:dK(hR,hS);var hP=hR.d.length;if(hR.c===hP||hS.c<hu){hH.cacheReads++;hK(hS.i+hS.c);hR.complete()}else{hU(ei,hS.i+hu)}break;default:return hp(hR,hT,hV,hS,false)}}return true};var hp=function(hR,hQ,hP,hT,hV){var hX=hR.error;var hW=hR.transition;var hU=hR.wait;var hS;switch(hQ){case bm:hE();break;case ei:hS=hD(hT).then(function(hZ,hY){if(!hR.canceled){if(hZ){hW(bK,hY)}else{hW(B,hT)}}});break;case B:hS=hi(hT).then(function(hY){if(!hR.canceled){if(hV){hH.prefetches++}else{hH.netReads++}hW(gn,hY)}},hX);break;case gn:if(hP!==W){hM(W);hS=hr(hT.i,hT).then(function(hY){if(!hR.canceled){if(!hY&&hV){hR.pending=0}hW(bK,hT)}hM(ez)})}break;default:return false}if(hS){if(hR.canceled){hS.cancel()}else{if(hR.s===hQ){hU(hS)}}}return true};hc.read("__settings",function(hP,hQ){if(b8(hQ)){var hR=hQ.version;if(!hR||hR.indexOf("1.")!==0){hC("Unsupported cache store version "+hR)();return}if(hu!==hQ.pageSize||hq.identifier!==hQ.sourceId){hm().then(function(){hM(ez)},hC("Unable to clear store during initialization"))}else{hf=hQ.actualCacheSize;hk=hQ.allDataLocal;he=hQ.cacheSize;hl=hQ.collectionCount;hF=hQ.highestSavedPage;hA=hQ.highestSavedPageSize;hL=hR;hM(ez)}}else{hj(function(){hM(ez)},hC("Unable to write settings during initialization."))}},hC("Unable to read settings from store."));return hz};f5.createDataCache=function(hb){eW(hb.pageSize,"pageSize");fb(hb.cacheSize,"cacheSize");fb(hb.prefetchSize,"prefetchSize");if(!b8(hb.name)){throw {message:"Undefined or null name",options:hb}}if(!b8(hb.source)){throw {message:"Undefined source",options:hb}}return new fE(hb)}})(this);